<!DOCTYPE html>
<!-- saved from url=(0160)https://flink-learning.org.cn/article/detail/758a865c6c808d6b89d494c0827a1d61?spm=a2csy.flink.0.0.49493bdcD57Lb0&name=article&tab=lingjichurumenjiaocheng&page=1 -->
<html lang="zh-Hans" data-spm-anchor-id="a2csy.flink.0.i0.79b22c842ztfvp"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Flink 中文社区 | Apache Flink 零基础入门（五）：客户端操作</title>
    <!--<base href="/">--><base href=".">
    <meta name="keywords" content="flink,中文社区,社区活动,学习资料,流计算,实时计算">
    <meta name="author" content="Flink 中文社区">
    <meta name="description" content="在前面几期的课程里面讲过了 Flink 开发环境的搭建和应用的部署以及运行，今天的课程主要是讲 Flink 的客户端操作。本次讲解以实际操作为主。这次课程是基于社区的 Flink 1.7.2 版本，操作系统是 Mac 系统，浏览器是 Google Chrome 浏览器。有关开发环境的准备和集群的部署">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=5.0">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="translucent">
    <meta name="mobile-web-app-capable" content="yes">

    <!--Open Graph-->
    <meta property="og:url" content="https://flink-learning.org.cn/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Flink 中文社区 | Apache Flink 零基础入门（五）：客户端操作">
    <meta property="og:site_name" content="Flink 中文社区 | Apache Flink 零基础入门（五）：客户端操作">
    <meta property="og:locale" content="zh">
    <meta property="og:description" content="在前面几期的课程里面讲过了 Flink 开发环境的搭建和应用的部署以及运行，今天的课程主要是讲 Flink 的客户端操作。本次讲解以实际操作为主。这次课程是基于社区的 Flink 1.7.2 版本，操作系统是 Mac 系统，浏览器是 Google Chrome 浏览器。有关开发环境的准备和集群的部署">
    <meta property="og:image" content="https://img.alicdn.com/imgextra/i4/O1CN01TzedE725HVZMC6TQd_!!6000000007501-0-tps-1606-527.jpg">
    <meta property="og:image:secure_url" content="https://img.alicdn.com/imgextra/i4/O1CN01TzedE725HVZMC6TQd_!!6000000007501-0-tps-1606-527.jpg">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="424">
    <meta property="og:image:height" content="200">
    <meta name="theme-color" content="#ffffff">

    <!--?xml version="1.0" encoding="UTF-8" /-->

    <link rel="manifest" href="https://flink-learning.org.cn/manifest.webmanifest">
    <link rel="shortcut icon" href="https://flink-learning.org.cn/assets/icons/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="https://flink-learning.org.cn/assets/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://flink-learning.org.cn/assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://flink-learning.org.cn/assets/icons/favicon-16x16.png">
    <link rel="preload" type="font/woff2" crossorigin="" as="font" href="https://at.alicdn.com/t/font_2522562_0btb0lgxfgu9.woff2?t=1652844467143">
    <link rel="preload" type="font/woff" crossorigin="" as="font" href="https://at.alicdn.com/t/font_2522562_0btb0lgxfgu9.woff?t=1652844467143">
    <link rel="preload" type="font/ttf" crossorigin="" as="font" href="https://at.alicdn.com/t/font_2522562_0btb0lgxfgu9.ttf?t=1652844467143">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="theme-color" content="#ffffff">
    <meta name="aes-config" content="pid=2RM6Be&amp;user_type=101&amp;uid=&amp;username=">
    <meta name="data-spm" content="a2csy">
    <script src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/hm.js.download"></script><script async="" id="beacon-aplus" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/203464283.js.download"></script><script>
      (function(w, d, s, q, i) {
        w[q] = w[q] || [];
        var f = d.getElementsByTagName(s)[0],j = d.createElement(s);
        j.async = true;
        j.id = 'beacon-aplus';
        j.src = 'https://d.alicdn.com/alilog/mlog/aplus/' + i + '.js';
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'aplus_queue', '203464283');
    </script>
    <script>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement('script');
        hm.src = 'https://hm.baidu.com/hm.js?7cae8989c4bd02b94f8af6c666238343';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/js"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'G-469BNBJ7HR');
    </script>
  <style>@charset "UTF-8";html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}body{margin:0;}*,:after,:before{box-sizing:inherit;}html{box-sizing:border-box;font-size:20px;line-height:1.5;-webkit-tap-highlight-color:transparent;}body{background:#fff;color:#343434;font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,sans-serif;font-size:.8rem;overflow-x:hidden;text-rendering:optimizeLegibility;}*{text-rendering:optimizeLegibility;-webkit-font-smoothing:subpixel-antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;margin:0;padding:0;outline:none!important;}html{font:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Roboto,PingFang TC,Hiragino Sans CNS,Microsoft JhengHei,Helvetica Neue,sans-serif;}</style><link rel="stylesheet" href="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/styles.1a8c565a143c58aa46c8.css" media="all" onload="this.media=&#39;all&#39;"><noscript><link rel="stylesheet" href="styles.1a8c565a143c58aa46c8.css"></noscript><style></style><style>[_nghost-flink-c21]{display:flex;flex-direction:column}.content[_ngcontent-flink-c21]{overflow:hidden;min-height:calc(100vh - 60px)}@media screen and (max-width:720px){.back-top[_ngcontent-flink-c21]{display:none}}</style><style>@media screen and (min-width:721px){[_nghost-flink-c17]{display:block;position:fixed;top:0;left:0;right:0;transition:all .3s;z-index:99}[_nghost-flink-c17]   .header[_ngcontent-flink-c17]{background-color:hsla(0,0%,100%,.1)}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]{height:60px;max-width:1280px;padding:0;margin:0 auto;display:flex;flex-wrap:nowrap;justify-content:space-around;align-items:center}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]{height:60px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17] > a[_ngcontent-flink-c17]{color:#fff;display:flex;justify-content:center;align-items:center;height:60px;min-width:90px;line-height:60px;padding:0;border:none;font-size:16px;margin:0 12px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17] > a[_ngcontent-flink-c17]   img[_ngcontent-flink-c17]{width:177px;height:28px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17] > a[_ngcontent-flink-c17]   .black[_ngcontent-flink-c17]{display:none}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17] > a[_ngcontent-flink-c17]:hover{font-weight:600}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17] > a.active[_ngcontent-flink-c17]{box-shadow:inset 0 -3px 0 0 #fff;font-weight:600}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17] > a[_ngcontent-flink-c17]   span[_ngcontent-flink-c17]{font-size:20px;font-weight:600}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-tab[_ngcontent-flink-c17]{flex:7}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]{flex:3;display:none}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]{height:30px;flex:1 1 300px;max-width:300px;position:relative}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]{display:flex;border:1px solid hsla(0,0%,100%,.5);height:30px;width:100%;align-items:center;position:relative}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   label[_ngcontent-flink-c17]{position:relative;width:100%;display:flex;align-items:center}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   label[_ngcontent-flink-c17]   span[_ngcontent-flink-c17]{display:flex;margin:0 4px;width:20px;overflow:hidden}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   label[_ngcontent-flink-c17]   .search-big[_ngcontent-flink-c17]{color:#a5a5a5;display:flex;justify-content:center;align-items:center;width:50px;height:50px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   label[_ngcontent-flink-c17]   .search-litter[_ngcontent-flink-c17]{color:hsla(0,0%,100%,.7);display:flex;width:30px;justify-content:center;align-items:center;margin-right:10px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .form-input[_ngcontent-flink-c17]{width:100%;padding:0;background:none;border:none;height:30px;font-size:14px;color:#a5a5a5}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .form-input[_ngcontent-flink-c17]::placeholder{color:hsla(0,0%,100%,.7)}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .search-log[_ngcontent-flink-c17]{opacity:0;background-color:#fff;width:360px;margin:0 0 10px;display:flex;flex-wrap:wrap;border-bottom:1px solid #e8e8e8}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .search-log[_ngcontent-flink-c17]   p[_ngcontent-flink-c17]{margin-top:2px;display:block;width:100%;font-size:12px;padding:12px 0;color:#a5a5a5;border-top:1px solid #e8e8e8}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .search-log[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]{cursor:pointer;height:24px;line-height:24px;padding:0 16px;margin:0 8px 8px 0;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:12px;color:#686868;background-color:#fff;border:1px solid #e8e8e8}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .search-log[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]:hover{color:#f07}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .search-list[_ngcontent-flink-c17]{background-color:#fff;display:flex;flex-direction:column;margin:0 0 20px;width:100%}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .search-list[_ngcontent-flink-c17]   .not-content[_ngcontent-flink-c17]{display:flex;justify-content:center;font-size:14px;color:#343434}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .search-list[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]{width:100%}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .search-list[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]{display:flex;align-items:center;width:100%;padding:4px 0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px;color:#343434}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .search-list[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]:hover{color:#f07}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .search-list[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]{font-size:16px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .mouse-search[_ngcontent-flink-c17]{position:absolute;top:-5px;transition:.1s linear;height:auto;width:560px;display:flex;flex-wrap:wrap;align-items:center;background-color:#fff;box-shadow:0 2px 8px 0 hsla(0,0%,65%,.12);border:1px solid #e8e8e8!important;padding:0 20px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .mouse-search[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]{color:#a5a5a5;font-size:20px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .mouse-search[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]:hover{color:#f07}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .mouse-search[_ngcontent-flink-c17]   label[_ngcontent-flink-c17]   span[_ngcontent-flink-c17]{display:none}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .mouse-search[_ngcontent-flink-c17]   .form-input[_ngcontent-flink-c17]{color:#343434;height:50px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .mouse-search[_ngcontent-flink-c17]   .form-input[_ngcontent-flink-c17]::placeholder{color:#a5a5a5}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .mouse-search[_ngcontent-flink-c17]   .search-log[_ngcontent-flink-c17]{width:560px;animation:show .2s linear .1s 1 forwards}@keyframes show{0%{opacity:0}to{opacity:1}}[_nghost-flink-c17]   .light[_ngcontent-flink-c17]{background-color:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.08)}[_nghost-flink-c17]   .light[_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]{color:#343434}[_nghost-flink-c17]   .light[_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   a.active[_ngcontent-flink-c17]{box-shadow:inset 0 -3px 0 0 #f07}[_nghost-flink-c17]   .light[_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]:hover{color:#f07}[_nghost-flink-c17]   .light[_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .navbar-brand[_ngcontent-flink-c17]   .white[_ngcontent-flink-c17]{display:none}[_nghost-flink-c17]   .light[_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .navbar-brand[_ngcontent-flink-c17]   .black[_ngcontent-flink-c17]{display:block}[_nghost-flink-c17]   .light[_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]{border:1px solid #a5a5a5}[_nghost-flink-c17]   .light[_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]{color:#a5a5a5}[_nghost-flink-c17]   .light[_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]:hover{color:#f07}[_nghost-flink-c17]   .light[_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .form-input[_ngcontent-flink-c17]{color:#343434}[_nghost-flink-c17]   .light[_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .form-input[_ngcontent-flink-c17]::placeholder{color:#a5a5a5}[data-scrolled=true][_nghost-flink-c17]{background:#fff;box-shadow:0 2px 4px 0 hsla(0,0%,91%,.6)}[data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]{height:60px;color:#343434;max-width:1280px;padding:0;margin:0 auto;display:flex;justify-content:space-around}[data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   a.active[_ngcontent-flink-c17]{box-shadow:inset 0 -3px 0 0 #f07}[data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]   .white[_ngcontent-flink-c17]{display:none}[data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]   .black[_ngcontent-flink-c17]{display:block}[data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .top-tab[_ngcontent-flink-c17]{flex:7}[data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]{display:none}[data-scrolled=true][_nghost-flink-c17]   .navbar[data-scrolled=true][_ngcontent-flink-c17]{background:#fff;box-shadow:0 2px 4px 0 hsla(0,0%,91%,.6)}[data-scrolled=true][_nghost-flink-c17]   .navbar[data-scrolled=true][_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]{color:#343434}[data-scrolled=true][_nghost-flink-c17]   .navbar[data-scrolled=true][_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]:hover{color:#f07}[data-scrolled=true][_nghost-flink-c17]   .navbar[data-scrolled=true][_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]:nth-child(2){border-bottom:3px solid #f07;font-weight:600}[data-scrolled=true][_nghost-flink-c17]   .navbar[data-scrolled=true][_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]{border:1px solid #a5a5a5}[data-scrolled=true][_nghost-flink-c17]   .navbar[data-scrolled=true][_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]{color:#a5a5a5}[data-scrolled=true][_nghost-flink-c17]   .navbar[data-scrolled=true][_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]:hover{color:#f07}[data-scrolled=true][_nghost-flink-c17]   .navbar[data-scrolled=true][_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .form-input[_ngcontent-flink-c17]{color:#343434}[data-scrolled=true][_nghost-flink-c17]   .navbar[data-scrolled=true][_ngcontent-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .form-input[_ngcontent-flink-c17]::placeholder{color:#a5a5a5}[data-scrolled=true][_nghost-flink-c17]   .navbar[data-stuck=true][_ngcontent-flink-c17]{transform:translate3d(0,-100%,0);transition:transform .3s .5s}[data-scrolled=true][data-scrolled=true][_nghost-flink-c17]{background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.08)}[data-scrolled=true][data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]{color:#343434}[data-scrolled=true][data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]:hover{color:#f07}[data-scrolled=true][data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]{border:1px solid #a5a5a5}[data-scrolled=true][data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]{color:#a5a5a5}[data-scrolled=true][data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]:hover{color:#f07}[data-scrolled=true][data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .form-input[_ngcontent-flink-c17]{color:#343434}[data-scrolled=true][data-scrolled=true][_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .navbar-section[_ngcontent-flink-c17]   .search[_ngcontent-flink-c17]   .form-input[_ngcontent-flink-c17]::placeholder{color:#a5a5a5}}</style><style>@media screen and (max-width:720px){.fixed[_ngcontent-flink-c17]{position:fixed;width:100%;z-index:100;background-color:#fff}[_nghost-flink-c17]{background-color:#fff;width:100%;position:fixed;z-index:99}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]{height:60px;padding:0 16px;box-shadow:0 2px 4px 0 hsla(0,0%,70%,.2);display:flex;align-items:center;justify-content:space-between}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-search[_ngcontent-flink-c17]{display:none}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-tab[_ngcontent-flink-c17]{max-width:200px;height:28px;flex:1}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-tab[_ngcontent-flink-c17]   .navbar-brand[_ngcontent-flink-c17]{font-size:20px;color:#343434;letter-spacing:0;font-weight:600;text-align:left;display:flex;justify-content:center;align-items:center}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-tab[_ngcontent-flink-c17]   .navbar-brand[_ngcontent-flink-c17]   img[_ngcontent-flink-c17]{width:152px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-tab[_ngcontent-flink-c17]   .navbar-brand[_ngcontent-flink-c17]   .white[_ngcontent-flink-c17]{display:none}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-tab[_ngcontent-flink-c17]   .btn[_ngcontent-flink-c17]{display:none}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]{display:flex;justify-content:space-between;align-items:center;width:90px;height:28px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]{text-decoration:none}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]{margin:0}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   .search-icon[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]{font-size:20px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]{margin:0;display:flex;align-items:center;justify-content:center}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]:first-child{margin-top:2px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]{height:100%;background-color:#fff;box-shadow:0 2px 4px 0 hsla(0,0%,46%,.4);overflow:hidden;width:100%;position:fixed;top:60px;left:0;padding:12px 12px 24px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]   div[_ngcontent-flink-c17]{position:relative}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]   div[_ngcontent-flink-c17]   .mobile-input[_ngcontent-flink-c17]{font-size:12px;padding:0 30px 0 12px;width:100%;height:32px;border:1px solid #a5a5a5;border-radius:2px;box-shadow:none!important;-webkit-appearance:none}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]   div[_ngcontent-flink-c17]   .mobile-input[_ngcontent-flink-c17]::placeholder{color:#a5a5a5}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]   div[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]{position:absolute;right:4px;top:4px;display:flex;width:24px;height:24px;color:#a5a5a5;font-size:16px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]   .mobile-log[_ngcontent-flink-c17]{display:flex;flex-wrap:wrap}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]   .mobile-log[_ngcontent-flink-c17]   p[_ngcontent-flink-c17]{width:100%;display:block;margin:12px 0;font-size:12px;color:#a5a5a5}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]   .mobile-log[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]{max-width:160px;height:24px;line-height:24px;padding:0 8px;display:block;margin:0 8px 8px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:12px;color:#686868;background-color:#fff;border:1px solid #e8e8e8}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]   .mobile-searchList[_ngcontent-flink-c17]{margin:12px 0;width:100%}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]   .mobile-searchList[_ngcontent-flink-c17]   .not-content[_ngcontent-flink-c17]{display:flex;margin-top:60px;justify-content:center;font-size:14px;color:#343434}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]   .mobile-searchList[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]{width:100%;overflow:hidden}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]   .mobile-searchList[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]{display:block;align-items:center;width:100%;padding:4px 0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px;color:#343434}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-search[_ngcontent-flink-c17]   .mobile-searchList[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]{font-size:16px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-nav[_ngcontent-flink-c17]{height:100%;background-color:#fff;box-shadow:0 2px 4px 0 hsla(0,0%,46%,.4);overflow:hidden;width:100%;position:fixed;top:60px;left:0;padding:0 12px 24px}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-nav[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]{text-align:center;font-size:12px;font-weight:bolder;line-height:54px;height:54px;border-bottom:1px solid #e8e8e8}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   ul[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   .mobile-nav[_ngcontent-flink-c17]   li[_ngcontent-flink-c17]   a[_ngcontent-flink-c17]{display:block;width:100%;color:#343434}[_nghost-flink-c17]   .navbar[_ngcontent-flink-c17]   .top-icon[_ngcontent-flink-c17]   i[_ngcontent-flink-c17]{font-size:24px;color:#757575}}</style><style>[_nghost-flink-c19]{display:block;position:relative;z-index:66;background-color:#222}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]{max-width:1280px;display:flex;line-height:24px;flex-direction:column;justify-content:center;align-items:center;margin:0 auto;padding:24px 0 12px}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-partner[_ngcontent-flink-c19]{width:100%;display:flex}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-partner[_ngcontent-flink-c19]   span[_ngcontent-flink-c19]{font-size:12px;color:hsla(0,0%,100%,.6);font-weight:600;flex:0 0 60px}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-partner[_ngcontent-flink-c19]   div[_ngcontent-flink-c19]{flex:1 1 auto;display:flex;flex-wrap:wrap}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-partner[_ngcontent-flink-c19]   a[_ngcontent-flink-c19]{font-size:12px;margin-right:12px;white-space:nowrap;color:hsla(0,0%,100%,.6)}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-partner[_ngcontent-flink-c19]   a[_ngcontent-flink-c19]:hover{color:#f07}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-center[_ngcontent-flink-c19]{margin-top:12px;display:flex;align-items:center;justify-content:center}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   img[_ngcontent-flink-c19]{display:inline-block;text-decoration:none;border:0;line-height:20px}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-license[_ngcontent-flink-c19]   a[_ngcontent-flink-c19]{display:flex;align-items:center}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-record[_ngcontent-flink-c19]{margin:0 8px}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-record[_ngcontent-flink-c19]   a[_ngcontent-flink-c19]{display:flex;height:20px;font-size:12px;line-height:20px;color:hsla(0,0%,100%,.6)}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-record[_ngcontent-flink-c19]   a[_ngcontent-flink-c19]   p[_ngcontent-flink-c19]{margin-left:3px;line-height:25px}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-record[_ngcontent-flink-c19]   a[_ngcontent-flink-c19]:hover{color:#f07}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-article[_ngcontent-flink-c19]   a[_ngcontent-flink-c19]{display:flex;height:20px;align-items:center;color:hsla(0,0%,100%,.6)}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-article[_ngcontent-flink-c19]   a[_ngcontent-flink-c19]   p[_ngcontent-flink-c19]{height:20px;line-height:25px;font-size:12px}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-article[_ngcontent-flink-c19]   a[_ngcontent-flink-c19]:hover{color:#f07}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .focus-us[_ngcontent-flink-c19]{display:none;margin-top:20px}@media screen and (max-width:720px){[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]{height:auto;padding:0;display:block}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-partner[_ngcontent-flink-c19]{padding:0 16px}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .footer-center[_ngcontent-flink-c19]{justify-content:left;padding:16px;flex-wrap:wrap}[_nghost-flink-c19]   .footer[_ngcontent-flink-c19]   .focus-us[_ngcontent-flink-c19]{display:block}}</style><style>[_nghost-flink-c20]{width:50px;position:fixed;right:15px;bottom:100px;z-index:99}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]{cursor:pointer}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]{height:50px;display:flex;-webkit-user-select:none;user-select:none;flex-direction:column;justify-content:center;align-items:center;border:1px solid #e8e8e8;background-color:#fff;font-size:12px;color:#686868;position:relative}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]:not(:last-child){border-bottom:none}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]:hover, .back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]:hover   i[_ngcontent-flink-c20]{color:#f07}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]:hover   ul[_ngcontent-flink-c20]{display:block}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]{display:none;position:absolute;box-shadow:2px 2px 4px 0 hsla(0,0%,91%,.6);background-color:#fff;left:-220px;width:210px;padding:0 12px}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]{height:100px;border:none}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]:first-child{border-bottom:1px solid #e8e8e8}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   figure[_ngcontent-flink-c20]{display:flex;width:100%;justify-content:center}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   figure[_ngcontent-flink-c20]   figcaption[_ngcontent-flink-c20]{width:110px;display:flex;flex-direction:column;justify-content:space-around}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   figure[_ngcontent-flink-c20]   figcaption[_ngcontent-flink-c20]   p[_ngcontent-flink-c20]:first-child, .back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   figure[_ngcontent-flink-c20]   figcaption[_ngcontent-flink-c20]   p[_ngcontent-flink-c20]:first-child   i[_ngcontent-flink-c20]{color:#343434}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   figure[_ngcontent-flink-c20]   figcaption[_ngcontent-flink-c20]   .characteristic[_ngcontent-flink-c20]{display:flex;flex-direction:column}.back-top[_ngcontent-flink-c20]   ul[_ngcontent-flink-c20]   li[_ngcontent-flink-c20]   i[_ngcontent-flink-c20]{font-size:15px;color:#686868}</style><style>[_nghost-flink-c18]{order:3}[_nghost-flink-c18]   .card[_ngcontent-flink-c18]{overflow:visible;padding:0 16px;background:#fff;border:none}[_nghost-flink-c18]   .card[_ngcontent-flink-c18]   .card-header[_ngcontent-flink-c18]{padding:16px 0 0}[_nghost-flink-c18]   .card[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]{padding:16px 0}[_nghost-flink-c18]   .card[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]{margin:0}[_nghost-flink-c18]   .card[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]{margin:4px 0;height:22px;font-size:12px;color:#343434;line-height:22px}[_nghost-flink-c18]   .card[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]   a[_ngcontent-flink-c18], [_nghost-flink-c18]   .card[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]   span[_ngcontent-flink-c18]{display:flex;align-items:center}[_nghost-flink-c18]   .card[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]   a[_ngcontent-flink-c18]:hover   i[_ngcontent-flink-c18], [_nghost-flink-c18]   .card[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]   span[_ngcontent-flink-c18]:hover   i[_ngcontent-flink-c18]{color:#f07}[_nghost-flink-c18]   .card[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]   a[_ngcontent-flink-c18]   i[_ngcontent-flink-c18], [_nghost-flink-c18]   .card[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]   span[_ngcontent-flink-c18]   i[_ngcontent-flink-c18]{margin-right:16px;height:16px;display:flex;align-items:center;width:16px;color:#686868;font-size:16px}[_nghost-flink-c18]   .dark[_ngcontent-flink-c18]{background:transparent}[_nghost-flink-c18]   .dark[_ngcontent-flink-c18]   .card-header[_ngcontent-flink-c18]   .card-title[_ngcontent-flink-c18]{color:#fff}[_nghost-flink-c18]   .dark[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]   a[_ngcontent-flink-c18], [_nghost-flink-c18]   .dark[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]   span[_ngcontent-flink-c18]{color:#fff}[_nghost-flink-c18]   .dark[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]   a[_ngcontent-flink-c18]:hover   i[_ngcontent-flink-c18], [_nghost-flink-c18]   .dark[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]   span[_ngcontent-flink-c18]:hover   i[_ngcontent-flink-c18]{color:#fff}[_nghost-flink-c18]   .dark[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]   a[_ngcontent-flink-c18]   i[_ngcontent-flink-c18], [_nghost-flink-c18]   .dark[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   ul[_ngcontent-flink-c18]   li[_ngcontent-flink-c18]   span[_ngcontent-flink-c18]   i[_ngcontent-flink-c18]{color:#fff}[_nghost-flink-c18]   .popover-container[_ngcontent-flink-c18]{width:160px}[_nghost-flink-c18]   .qrcode[_ngcontent-flink-c18]{height:126px;width:126px}@media screen and (max-width:720px){[_nghost-flink-c18]   .card[_ngcontent-flink-c18]   .card-body[_ngcontent-flink-c18]   .popover-left[_ngcontent-flink-c18]   .popover-container[_ngcontent-flink-c18]{top:350%;left:100%}}</style><style>[_nghost-flink-c48]{background-color:#f7f8f9;margin-top:60px;padding-top:24px;display:block}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]{background-color:#fff;padding:24px 12px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]{max-width:1280px;margin:0 auto;display:flex;justify-content:space-between}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]{flex:1 1 auto;padding-bottom:100px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]{padding-bottom:24px;border-bottom:1px solid #e8e8e8}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .breadcrumb[_ngcontent-flink-c48]{font-size:12px;display:flex;margin-bottom:24px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .breadcrumb[_ngcontent-flink-c48]   li[_ngcontent-flink-c48]{color:#757575;white-space:nowrap}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .breadcrumb[_ngcontent-flink-c48]   li[_ngcontent-flink-c48]   a[_ngcontent-flink-c48]{color:#f07}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .breadcrumb[_ngcontent-flink-c48]   li[_ngcontent-flink-c48]   a[_ngcontent-flink-c48]:hover{text-decoration:underline!important}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .breadcrumb[_ngcontent-flink-c48]   li[_ngcontent-flink-c48]   i[_ngcontent-flink-c48]{margin:0 8px;font-size:12px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   h1[_ngcontent-flink-c48]{font-size:30px;margin:0 0 24px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .author-mobile[_ngcontent-flink-c48]{display:none}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]{display:flex;flex-wrap:wrap}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   h1[_ngcontent-flink-c48]{width:100%}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   img[_ngcontent-flink-c48]{object-fit:cover;flex:0 0 410px;border:1px solid #f1f3f5}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]{max-width:540px;margin-left:24px;flex:1 1 auto;display:flex;flex-direction:column}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   .detail-author[_ngcontent-flink-c48]{flex:0 0 24px;font-size:14px;font-weight:600;display:flex}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   .detail-author[_ngcontent-flink-c48]   .author[_ngcontent-flink-c48], [_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   .detail-author[_ngcontent-flink-c48]   .collector[_ngcontent-flink-c48]{line-height:24px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   .detail-author[_ngcontent-flink-c48]   .author-content[_ngcontent-flink-c48]{display:inline-block}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   .detail-author[_ngcontent-flink-c48]   .author-content[_ngcontent-flink-c48]   a[_ngcontent-flink-c48]{color:#f07;margin-right:8px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   .detail-author[_ngcontent-flink-c48]   .author-content[_ngcontent-flink-c48]   span[_ngcontent-flink-c48]{color:#343434;margin-right:8px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   .detail-author[_ngcontent-flink-c48]   span[_ngcontent-flink-c48]{margin-right:8px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   .detail-author[_ngcontent-flink-c48]   .collector[_ngcontent-flink-c48]{font-size:12px;margin-left:12px;font-weight:400;color:#757575}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   .detail-abstract[_ngcontent-flink-c48]{flex:1 1 auto;font-size:14px;color:#757575;line-height:24px;max-height:144px;margin:16px 0;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:6;overflow:hidden}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   .detail-tab[_ngcontent-flink-c48]{flex:0 0 24px;overflow:hidden;height:24px;display:flex}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   .detail-tab[_ngcontent-flink-c48]   strong[_ngcontent-flink-c48]{font-size:.6rem;color:#343434;margin-right:12px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .markdown[_ngcontent-flink-c48]{width:100%;max-width:980px;padding:24px 0}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-right[_ngcontent-flink-c48]{position:relative;flex:0 0 300px;margin-top:18px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-right[_ngcontent-flink-c48]   .check[_ngcontent-flink-c48]{display:none}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-right[_ngcontent-flink-c48]   .toc-icon[_ngcontent-flink-c48]{display:none}[_nghost-flink-c48]  .markdown table{table-layout:fixed}[_nghost-flink-c48]  .markdown table td, [_nghost-flink-c48]  .markdown table th{word-wrap:break-word;white-space:normal}@media screen and (max-width:720px){[_nghost-flink-c48]     .detail-content .content .article-left .markdown img{max-width:100%;max-height:100%;margin:0}[_nghost-flink-c48]     .detail-content .content .article-left .markdown .code{width:100%;overflow-x:auto;overflow-y:hidden;-ms-overflow-style:none;scrollbar-width:none}[_nghost-flink-c48]     .detail-content .content .article-left .markdown .code::-webkit-scrollbar{width:0;height:0}[_nghost-flink-c48]     .detail-content .content .article-left .markdown .code code{width:100%}[_nghost-flink-c48]{padding:0}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]{padding:24px 0}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]{flex-direction:column}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]{width:100%}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]{border:none;padding:0}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .breadcrumb[_ngcontent-flink-c48]{padding:0 20px;margin-bottom:12px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .breadcrumb[_ngcontent-flink-c48]   li[_ngcontent-flink-c48]:last-child{max-width:calc(100vw - 100px);overflow:hidden;text-overflow:ellipsis}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .introduction[_ngcontent-flink-c48]{display:none}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .author-mobile[_ngcontent-flink-c48]{display:block}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .author-mobile[_ngcontent-flink-c48]   figure[_ngcontent-flink-c48]   h1[_ngcontent-flink-c48]{padding:0 20px;height:auto}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .author-mobile[_ngcontent-flink-c48]   figure[_ngcontent-flink-c48]   .information[_ngcontent-flink-c48]{display:flex;padding:0 20px;margin-bottom:16px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .author-mobile[_ngcontent-flink-c48]   figure[_ngcontent-flink-c48]   .information[_ngcontent-flink-c48]   img[_ngcontent-flink-c48]{flex:0 0 64px;object-fit:cover;border-radius:50%}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .author-mobile[_ngcontent-flink-c48]   figure[_ngcontent-flink-c48]   .information[_ngcontent-flink-c48]   p[_ngcontent-flink-c48]{flex:1 1 auto;margin-left:12px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .author-mobile[_ngcontent-flink-c48]   figure[_ngcontent-flink-c48]   .information[_ngcontent-flink-c48]   p[_ngcontent-flink-c48]   a[_ngcontent-flink-c48]{font-size:14px;font-weight:800;color:#f07}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .author-mobile[_ngcontent-flink-c48]   figure[_ngcontent-flink-c48]   .information[_ngcontent-flink-c48]   p[_ngcontent-flink-c48]   span[_ngcontent-flink-c48]{font-size:14px;color:#343434}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .author-mobile[_ngcontent-flink-c48]   figure[_ngcontent-flink-c48]   .information[_ngcontent-flink-c48]   p[_ngcontent-flink-c48]   strong[_ngcontent-flink-c48]{margin-top:5px;display:block;line-height:22px;font-size:12px;color:#757575}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .author-mobile[_ngcontent-flink-c48]   figure[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   p[_ngcontent-flink-c48]{padding:0 12px;font-size:12px;color:#343434;margin-bottom:12px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .author-mobile[_ngcontent-flink-c48]   figure[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   p[_ngcontent-flink-c48]   span[_ngcontent-flink-c48]{margin-right:12px}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .detail-title[_ngcontent-flink-c48]   .author-mobile[_ngcontent-flink-c48]   figure[_ngcontent-flink-c48]   figcaption[_ngcontent-flink-c48]   .abstract[_ngcontent-flink-c48]{margin:0 8px;padding:16px 12px;line-height:26px;background-color:hsla(0,0%,91%,.4)}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-left[_ngcontent-flink-c48]   .markdown[_ngcontent-flink-c48]{padding:12px 20px;overflow:hidden}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-right[_ngcontent-flink-c48]{width:100%;height:50px;position:fixed;bottom:0}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-right[_ngcontent-flink-c48]   .toc[_ngcontent-flink-c48]{position:fixed;-webkit-transform:translateZ(0);bottom:0;width:100%;height:0}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-right[_ngcontent-flink-c48]   .toc-icon[_ngcontent-flink-c48]{position:fixed;bottom:64px;right:24px;z-index:99;border-radius:50%;display:flex;justify-content:center;align-items:center;width:32px;height:32px;background-color:#fff;box-shadow:0 1px 5px 0 rgba(0,0,0,.25)}[_nghost-flink-c48]   .detail-content[_ngcontent-flink-c48]   .content[_ngcontent-flink-c48]   .article-right[_ngcontent-flink-c48]   [_ngcontent-flink-c48]:checked ~ .toc[_ngcontent-flink-c48]{height:280px}}</style><style>.hide[_ngcontent-flink-c46]{visibility:hidden}[_nghost-flink-c46]{display:flex;justify-content:space-between;padding:16px 0}[_nghost-flink-c46]   a[_ngcontent-flink-c46]{display:flex}@media screen and (max-width:720px){[_nghost-flink-c46]{padding-left:18px;padding-right:18px}[_nghost-flink-c46]   a[_ngcontent-flink-c46]   span[_ngcontent-flink-c46]{display:inline-block;width:150px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}}</style><style>ul[_ngcontent-flink-c47]{background-color:#fff;margin-left:20px;padding:0 12px 0 24px;position:fixed;z-index:0;max-height:50vh;overflow-y:auto;overflow-x:hidden;max-width:300px;cursor:pointer;border-left:3px solid #e8e8e8}ul[_ngcontent-flink-c47]   li[_ngcontent-flink-c47]{font-size:.6rem;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:32px;margin:0}ul[_ngcontent-flink-c47]   li[_ngcontent-flink-c47]   a[_ngcontent-flink-c47]{display:block}ul[_ngcontent-flink-c47]   li[_ngcontent-flink-c47]   .high-light[_ngcontent-flink-c47], ul[_ngcontent-flink-c47]   li[_ngcontent-flink-c47]   a[_ngcontent-flink-c47]:hover{color:#f07}@media screen and (max-width:720px){ul[_ngcontent-flink-c47]{box-shadow:0 -2px 12px 0 hsla(0,0%,46%,.6);width:100%;height:280px;max-width:100%;margin:0;padding:16px 24px;border:none;overflow:auto}}</style></head>
  <body data-spm="flink">
    <flink-root _nghost-flink-c23="" ng-version="12.0.1"><flink-layout _ngcontent-flink-c23="" _nghost-flink-c21=""><flink-navbar _ngcontent-flink-c21="" _nghost-flink-c17="" data-scrolled="true" data-stuck="false"><div _ngcontent-flink-c17="" class="header light"><header _ngcontent-flink-c17="" class="navbar"><section _ngcontent-flink-c17="" class="navbar-section top-tab"><a _ngcontent-flink-c17="" class="navbar-brand" href="https://flink-learning.org.cn/"><img _ngcontent-flink-c17="" flinksrc="https://img.alicdn.com/imgextra/i3/O1CN01ytPLGz1I2TOcBXun9_!!6000000000835-2-tps-531-84.png" alt="Flink 中文社区" width="177" height="28" class="white" loading="lazy" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01ytPLGz1I2TOcBXun9_!!6000000000835-2-tps-531-84.png"><img _ngcontent-flink-c17="" flinksrc="https://img.alicdn.com/imgextra/i4/O1CN01DYa9v11nBPD8aUxOt_!!6000000005051-2-tps-531-84.png" alt="Flink 中文社区" width="177" height="28" class="black" loading="lazy" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01DYa9v11nBPD8aUxOt_!!6000000005051-2-tps-531-84.png"></a><a _ngcontent-flink-c17="" routerlinkactive="active" class="btn btn-link" href="https://flink-learning.org.cn/"> 首页 </a><a _ngcontent-flink-c17="" routerlinkactive="active" class="btn btn-link" href="https://flink-learning.org.cn/activity">社区活动</a><a _ngcontent-flink-c17="" routerlinkactive="active" class="btn btn-link active" href="https://flink-learning.org.cn/article">学习资料</a></section><section _ngcontent-flink-c17="" class="top-icon" style="justify-content: space-between;"><ul _ngcontent-flink-c17=""><li _ngcontent-flink-c17="" class="search-icon"><i _ngcontent-flink-c17="" class="flink-community communityHover"></i><!----><!----><div _ngcontent-flink-c17="" class="mobile-search" style="display: none;"><div _ngcontent-flink-c17=""><input _ngcontent-flink-c17="" type="text" id="mobile-input" placeholder="找活动｜找资料｜找作者" class="mobile-input ng-untouched ng-pristine ng-valid"><i _ngcontent-flink-c17="" class="flink-community communityHover"></i></div><!----><!----></div></li></ul><a _ngcontent-flink-c17="" href="https://flink-learning.org.cn/"><i _ngcontent-flink-c17="" class="flink-community communityshouye"></i></a><!----><ul _ngcontent-flink-c17=""><li _ngcontent-flink-c17="" class="mobile-icon"><i _ngcontent-flink-c17="" class="flink-community communitycaidan mobile-icon-nav"></i><!----><!----><!----></li></ul><!----></section><section _ngcontent-flink-c17="" class="navbar-section top-search"><div _ngcontent-flink-c17="" class="input-group input-inline search"><label _ngcontent-flink-c17=""><span _ngcontent-flink-c17=""><i _ngcontent-flink-c17="" class="flink-community communityHover search-litter"></i><!----><em _ngcontent-flink-c17="">搜索：</em><!----></span><input _ngcontent-flink-c17="" type="text" id="search-input" placeholder="找活动｜找资料｜找作者" class="form-input ng-untouched ng-pristine ng-valid"><!----></label><!----><!----></div></section></header></div></flink-navbar><main _ngcontent-flink-c21="" class="content"><router-outlet _ngcontent-flink-c23=""></router-outlet><flink-article _nghost-flink-c37=""><router-outlet _ngcontent-flink-c37=""></router-outlet><flink-detail _nghost-flink-c48=""><div _ngcontent-flink-c48="" class="detail-content" data-spm-anchor-id="a2csy.flink.0.i1.79b22c842ztfvp"><div _ngcontent-flink-c48="" class="content"><div _ngcontent-flink-c48="" class="article-left"><div _ngcontent-flink-c48="" class="detail-title"><ul _ngcontent-flink-c48="" class="breadcrumb"><li _ngcontent-flink-c48=""><a _ngcontent-flink-c48="" href="https://flink-learning.org.cn/article/lingjichurumenjiaocheng/1">学习资料</a><i _ngcontent-flink-c48="" class="flink-community communityyoushuangjiantou"></i></li><li _ngcontent-flink-c48="">Apache Flink 零基础入门（五）：客户端操作</li></ul><figure _ngcontent-flink-c48="" class="introduction"><h1 _ngcontent-flink-c48="">Apache Flink 零基础入门（五）：客户端操作</h1><div _ngcontent-flink-c48="" class="inner"><img _ngcontent-flink-c48="" width="410" height="228" alt="Apache Flink 零基础入门（五）：客户端操作" loading="lazy" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN010yM1Ol28DKnkKztSh_!!6000000007898-2-tps-827-315.png"></div><figcaption _ngcontent-flink-c48=""><div _ngcontent-flink-c48="" class="detail-author"><div _ngcontent-flink-c48="" class="author"> 作者： <div _ngcontent-flink-c48="" class="author-content"><a _ngcontent-flink-c48="" href="https://flink-learning.org.cn/author/ac2aa68d137af1d315c68444b79d2b3e">周凯波（宝牛）</a><!----><!----></div><!----></div><!----><!----></div><div _ngcontent-flink-c48="" class="detail-abstract">在前面几期的课程里面讲过了 Flink 开发环境的搭建和应用的部署以及运行，今天的课程主要是讲 Flink 的客户端操作。本次讲解以实际操作为主。这次课程是基于社区的 Flink 1.7.2 版本，操作系统是 Mac 系统，浏览器是 Google Chrome 浏览器。有关开发环境的准备和集群的部署，请参考「**</div><div _ngcontent-flink-c48="" class="detail-tab"><strong _ngcontent-flink-c48="">#技术探索</strong><strong _ngcontent-flink-c48="">#零基础入门教程</strong><!----></div></figcaption></figure><div _ngcontent-flink-c48="" class="author-mobile"><figure _ngcontent-flink-c48=""><h1 _ngcontent-flink-c48="">Apache Flink 零基础入门（五）：客户端操作</h1><div _ngcontent-flink-c48="" class="information"><img _ngcontent-flink-c48="" width="64" height="64" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01Dr7TDI1mhdSiCSL99_!!6000000004986-0-tps-812-812.jpg" title="周凯波（宝牛）" alt="周凯波（宝牛）"><p _ngcontent-flink-c48=""><a _ngcontent-flink-c48="" href="https://flink-learning.org.cn/author/ac2aa68d137af1d315c68444b79d2b3e">周凯波（宝牛）</a><!----><!----><strong _ngcontent-flink-c48="">阿里巴巴技术专家</strong></p></div><!----><figcaption _ngcontent-flink-c48=""><!----><p _ngcontent-flink-c48="" class="abstract">在前面几期的课程里面讲过了 Flink 开发环境的搭建和应用的部署以及运行，今天的课程主要是讲 Flink 的客户端操作。本次讲解以实际操作为主。这次课程是基于社区的 Flink 1.7.2 版本，操作系统是 Mac 系统，浏览器是 Google Chrome 浏览器。有关开发环境的准备和集群的部署，请参考「**</p></figcaption></figure></div></div><div _ngcontent-flink-c48="" class="markdown"><h2 id="1-环境说明">1. 环境说明</h2><p>在前面几期的课程里面讲过了 Flink 开发环境的搭建和应用的部署以及运行，今天的课程主要是讲 Flink 的客户端操作。本次讲解以实际操作为主。这次课程是基于社区的 Flink 1.7.2 版本，操作系统是 Mac 系统，浏览器是 Google Chrome 浏览器。有关开发环境的准备和集群的部署，请参考「**<a href="https://www.infoq.cn/article/zbBAGroBgtytDiBs*Xq9" target="_blank" rel="noopener">开发环境搭建和应用的配置、部署及运行</a>**」的内容。</p>
<h2 id="2-课程概要">2. 课程概要</h2><p>如下图所示，Flink 提供了丰富的客户端操作来提交任务和与任务进行交互，包括 Flink 命令行，Scala Shell，SQL Client，Restful API 和 Web。Flink 首先提供的最重要的是命令行，其次是 SQL Client 用于提交 SQL 任务的运行，还有就是 Scala Shell 提交 Table API 的任务。同时，Flink 也提供了Restful 服务，用户可以通过 http 方式进行调用。此外，还有 Web 的方式可以提交任务。</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN010yM1Ol28DKnkKztSh_!!6000000007898-2-tps-827-315.png" alt="null"></p>
<p>在 Flink 安装目录的 bin 目录下面可以看到有 flink, start-scala-shell.sh 和 sql-client.sh 等文件，这些都是客户端操作的入口。</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01qmAYKv28UHSJjEUln_!!6000000007935-2-tps-994-886.png" alt="null"></p>
<h2 id="3-flink-客户端操作">3. Flink 客户端操作</h2><h3 id="31-flink-命令行">3.1 Flink 命令行</h3><p>Flink 的命令行参数很多，输入 flink – h 能看到完整的说明：</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink <span class="token operator">-</span>h</code></pre><p>如果想看某一个命令的参数，比如 Run 命令，输入：</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink run <span class="token operator">-</span>h</code></pre><p>本文主要讲解常见的一些操作，更详细的文档请参考 Flink 命令行官方文档</p>
<h4 id="311-standalone">3.1.1 Standalone</h4><p>首先启动一个 Standalone 的集群：</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>start<span class="token operator">-</span>cluster<span class="token punctuation">.</span>sh
<span class="token class-name">Starting</span> <span class="token class-name"><span class="token namespace">cluster<span class="token punctuation">.</span></span>
Starting</span> standalonesession daemon on host zkb<span class="token operator">-</span>MBP<span class="token punctuation">.</span>local<span class="token punctuation">.</span>
<span class="token class-name">Starting</span> taskexecutor daemon on host zkb<span class="token operator">-</span>MBP<span class="token punctuation">.</span>local<span class="token punctuation">.</span></code></pre><p>打开 <strong><a href="http://127.0.0.1:8081/" target="_blank" rel="noopener">http://127.0.0.1:8081</a></strong> 能看到 Web 界面。</p>
<h5 id="run">Run</h5><p>运行任务，以 Flink 自带的例子 TopSpeedWindowing 为例：</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink run <span class="token operator">-</span>d examples<span class="token operator">/</span>streaming<span class="token operator">/</span><span class="token class-name">TopSpeedWindowing</span><span class="token punctuation">.</span>jar
<span class="token class-name">Starting</span> execution of program
<span class="token class-name">Executing</span> <span class="token class-name">TopSpeedWindowing</span> example <span class="token keyword">with</span> <span class="token keyword">default</span> input data <span class="token class-name"><span class="token namespace">set<span class="token punctuation">.</span></span>
Use</span> <span class="token operator">--</span>input <span class="token keyword">to</span> <span class="token namespace">specify</span> file <span class="token class-name"><span class="token namespace">input<span class="token punctuation">.</span></span>
Printing</span> result <span class="token keyword">to</span> <span class="token namespace">stdout<span class="token punctuation">.</span></span> <span class="token class-name">Use</span> <span class="token operator">--</span>output <span class="token keyword">to</span> <span class="token namespace">specify</span> output <span class="token class-name"><span class="token namespace">path<span class="token punctuation">.</span></span>
Job</span> has been submitted <span class="token keyword">with</span> <span class="token class-name">JobID</span> <span class="token number">5e20</span>cb6b0f357591171dfcca2eea09de</code></pre><p>运行起来后默认是 1 个并发:</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN0100Cfqh1USpZUQ5Wg2_!!6000000002517-2-tps-1024-503.png" alt="null"></p>
<p>点左侧「Task Manager」，然后点「Stdout」能看到输出日志：</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01AyAW701XP7CkmLxmB_!!6000000002915-2-tps-1024-275.png" alt="null"></p>
<p>或者查看本地 Log 目录下的 *.out 文件：</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01AN6W911ocG2NvZ1nB_!!6000000005245-2-tps-1024-678.png" alt="null"></p>
<h5 id="list">List</h5><p>查看任务列表：</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink list <span class="token operator">-</span>m <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8081</span>
<span class="token class-name">Waiting</span> <span class="token keyword">for</span> response<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token class-name">Running</span><span class="token operator">/</span><span class="token class-name">Restarting</span> <span class="token class-name">Jobs</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token number">24.03</span><span class="token number">.2019</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">14</span><span class="token operator">:</span><span class="token number">06</span> <span class="token operator">:</span> <span class="token number">5e20</span>cb6b0f357591171dfcca2eea09de <span class="token operator">:</span> <span class="token class-name">CarTopSpeedWindowingExample</span> <span class="token punctuation">(</span>RUNNING<span class="token punctuation">)</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">No</span> scheduled jobs<span class="token punctuation">.</span></code></pre><h5 id="stop">Stop</h5><p>停止任务。通过 -m 来指定要停止的 JobManager 的主机地址和端口。</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink stop <span class="token operator">-</span>m <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8081</span> d67420e52bd051fae2fddbaa79e046bb
<span class="token class-name">Stopping</span> job d67420e52bd051fae2fddbaa79e046bb<span class="token punctuation">.</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">The</span> program finished <span class="token keyword">with</span> <span class="token namespace">the</span> following exception<span class="token operator">:</span>
  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>FlinkException</span><span class="token operator">:</span> <span class="token class-name">Could</span> not stop the job   d67420e52bd051fae2fddbaa79e046bb<span class="token punctuation">.</span>
  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>client<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>CliFrontend</span><span class="token punctuation">.</span>lambda$stop$<span class="token function">5</span><span class="token punctuation">(</span><span class="token class-name">CliFrontend</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">554</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>client<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>CliFrontend</span><span class="token punctuation">.</span><span class="token function">runClusterAction</span><span class="token punctuation">(</span><span class="token class-name">CliFrontend</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">985</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>client<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>CliFrontend</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token class-name">CliFrontend</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">547</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>client<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>CliFrontend</span><span class="token punctuation">.</span><span class="token function">parseParameters</span><span class="token punctuation">(</span><span class="token class-name">CliFrontend</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1062</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>client<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>CliFrontend</span><span class="token punctuation">.</span>lambda$main$<span class="token function">11</span><span class="token punctuation">(</span><span class="token class-name">CliFrontend</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1126</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span>AccessController</span><span class="token punctuation">.</span><span class="token function">doPrivileged</span><span class="token punctuation">(</span><span class="token class-name">Native</span> <span class="token class-name">Method</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>security<span class="token punctuation">.</span>auth<span class="token punctuation">.</span></span>Subject</span><span class="token punctuation">.</span><span class="token function">doAs</span><span class="token punctuation">(</span><span class="token class-name">Subject</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">422</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span>UserGroupInformation</span><span class="token punctuation">.</span><span class="token function">doAs</span><span class="token punctuation">(</span><span class="token class-name">UserGroupInformation</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1836</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span>HadoopSecurityContext</span><span class="token punctuation">.</span><span class="token function">runSecured</span><span class="token punctuation">(</span><span class="token class-name">HadoopSecurityContext</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">41</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>client<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>CliFrontend</span><span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">CliFrontend</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1126</span><span class="token punctuation">)</span>
<span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>ExecutionException</span><span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>rest<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>RestClientException</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token class-name">Job</span> termination <span class="token punctuation">(</span>STOP<span class="token punctuation">)</span> failed<span class="token operator">:</span> <span class="token class-name">This</span> job is not stoppable<span class="token punctuation">.</span><span class="token punctuation">]</span>
  at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>CompletableFuture</span><span class="token punctuation">.</span><span class="token function">reportGet</span><span class="token punctuation">(</span><span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">357</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>CompletableFuture</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1915</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>client<span class="token punctuation">.</span>program<span class="token punctuation">.</span>rest<span class="token punctuation">.</span></span>RestClusterClient</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token class-name">RestClusterClient</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">392</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>client<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>CliFrontend</span><span class="token punctuation">.</span>lambda$stop$<span class="token function">5</span><span class="token punctuation">(</span><span class="token class-name">CliFrontend</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">552</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">9</span> more
<span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>rest<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>RestClientException</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token class-name">Job</span> termination <span class="token punctuation">(</span>STOP<span class="token punctuation">)</span> failed<span class="token operator">:</span> <span class="token class-name">This</span> job is not stoppable<span class="token punctuation">.</span><span class="token punctuation">]</span>
  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>rest<span class="token punctuation">.</span></span>RestClient</span><span class="token punctuation">.</span><span class="token function">parseResponse</span><span class="token punctuation">(</span><span class="token class-name">RestClient</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">380</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>rest<span class="token punctuation">.</span></span>RestClient</span><span class="token punctuation">.</span>lambda$submitRequest$<span class="token function">3</span><span class="token punctuation">(</span><span class="token class-name">RestClient</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">364</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>CompletableFuture</span><span class="token punctuation">.</span><span class="token function">uniCompose</span><span class="token punctuation">(</span><span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">952</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>CompletableFuture</span>$<span class="token class-name">UniCompose</span><span class="token punctuation">.</span><span class="token function">tryFire</span><span class="token punctuation">(</span><span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">926</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>CompletableFuture</span>$<span class="token class-name">Completion</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">CompletableFuture</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">442</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>ThreadPoolExecutor</span><span class="token punctuation">.</span><span class="token function">runWorker</span><span class="token punctuation">(</span><span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1149</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>ThreadPoolExecutor</span>$<span class="token class-name">Worker</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">624</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">748</span><span class="token punctuation">)</span></code></pre><p>从日志里面能看出 Stop 命令执行失败了。一个 Job 能够被 Stop 要求所有的 Source 都是可以 Stoppable 的，即实现了 StoppableFunction 接口。</p>
<pre class="code"><code><span class="token comment">/**
 * 需要能 stoppable 的函数必须实现这个接口，例如流式任务的 source。
 * stop() 方法在任务收到 STOP 信号的时候调用。
 * source 在接收到这个信号后，必须停止发送新的数据且优雅的停止。
 */</span>
<span class="token annotation punctuation">@PublicEvolving</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StoppableFunction</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
      * 停止 source。与 cancel() 不同的是，这是一个让 source 优雅停止的请求。
     * 等待中的数据可以继续发送出去，不需要立即停止。
      */</span>
    <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><h5 id="cancel">Cancel</h5><p>取消任务。如果在 conf/flink-conf.yaml 里面配置了 state.savepoints.dir，会保存 Savepoint，否则不会保存 Savepoint。</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink cancel <span class="token operator">-</span>m <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8081</span> <span class="token number">5e20</span>cb6b0f357591171dfcca2eea09de

<span class="token class-name">Cancelling</span> job <span class="token number">5e20</span>cb6b0f357591171dfcca2eea09de<span class="token punctuation">.</span>
<span class="token class-name">Cancelled</span> job <span class="token number">5e20</span>cb6b0f357591171dfcca2eea09de<span class="token punctuation">.</span></code></pre><p>也可以在停止的时候显示指定 Savepoint 目录。</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink cancel <span class="token operator">-</span>m <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8081</span> <span class="token operator">-</span>s <span class="token operator">/</span>tmp<span class="token operator">/</span>savepoint <span class="token number">29d</span>a945b99dea6547c3fbafd57ed8759

<span class="token class-name">Cancelling</span> job <span class="token number">29d</span>a945b99dea6547c3fbafd57ed8759 <span class="token keyword">with</span> <span class="token namespace">savepoint</span> <span class="token keyword">to</span> <span class="token operator">/</span>tmp<span class="token operator">/</span><span class="token class-name"><span class="token namespace">savepoint<span class="token punctuation">.</span></span>
Cancelled</span> job <span class="token number">29d</span>a945b99dea6547c3fbafd57ed8759<span class="token punctuation">.</span> <span class="token class-name">Savepoint</span> stored in file<span class="token operator">:</span><span class="token operator">/</span>tmp<span class="token operator">/</span>savepoint<span class="token operator">/</span>savepoint<span class="token operator">-</span><span class="token number">29d</span>a94<span class="token operator">-</span><span class="token number">88299</span>bacafb7<span class="token punctuation">.</span>

➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> ll <span class="token operator">/</span>tmp<span class="token operator">/</span>savepoint<span class="token operator">/</span>savepoint<span class="token operator">-</span><span class="token number">29d</span>a94<span class="token operator">-</span><span class="token number">88299</span>bacafb7
total <span class="token number">32</span>K
<span class="token operator">-</span>rw<span class="token operator">-</span>r<span class="token operator">--</span>r<span class="token operator">--</span> <span class="token number">1</span> baoniu <span class="token number">29</span>K <span class="token class-name">Mar</span> <span class="token number">24</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">33</span> _metadata</code></pre><p>取消和停止（流作业）的区别如下：</p>
<p>cancel() 调用，立即调用作业算子的 cancel() 方法，以尽快取消它们。如果算子在接到 cancel() 调用后没有停止，Flink 将开始定期中断算子线程的执行，直到所有算子停止为止。</p>
<p>stop() 调用，是更优雅的停止正在运行流作业的方式。stop() 仅适用于 Source 实现了 StoppableFunction 接口的作业。当用户请求停止作业时，作业的所有 Source 都将接收 stop() 方法调用。直到所有 Source 正常关闭时，作业才会正常结束。这种方式，使作业正常处理完所有作业。</p>
<h5 id="savepoint">Savepoint</h5><p>触发 Savepoint。</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink savepoint <span class="token operator">-</span>m <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8081</span> ec53edcfaeb96b2a5dadbfbe5ff62bbb <span class="token operator">/</span>tmp<span class="token operator">/</span>savepoint
<span class="token class-name">Triggering</span> savepoint <span class="token keyword">for</span> job <span class="token class-name"><span class="token namespace">ec53edcfaeb96b2a5dadbfbe5ff62bbb<span class="token punctuation">.</span></span>
Waiting</span> <span class="token keyword">for</span> response<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token class-name">Savepoint</span> <span class="token class-name"><span class="token namespace">completed<span class="token punctuation">.</span></span> Path</span><span class="token operator">:</span> file<span class="token operator">:</span><span class="token operator">/</span>tmp<span class="token operator">/</span>savepoint<span class="token operator">/</span>savepoint<span class="token operator">-</span>ec53ed<span class="token operator">-</span><span class="token number">84</span>b00ce500ee
<span class="token class-name">You</span> can resume your program from <span class="token keyword">this</span> savepoint <span class="token keyword">with</span> <span class="token namespace">the</span> run command<span class="token punctuation">.</span></code></pre><p>说明：Savepoint 和 Checkpoint 的区别（**<a href="https://www.ververica.com/blog/differences-between-savepoints-and-checkpoints-in-flink" target="_blank" rel="noopener">详见文档</a>**）：</p>
<p>Checkpoint 是增量做的，每次的时间较短，数据量较小，只要在程序里面启用后会自动触发，用户无须感知；Checkpoint 是作业 failover 的时候自动使用，不需要用户指定。</p>
<p>Savepoint 是全量做的，每次的时间较长，数据量较大，需要用户主动去触发。Savepoint 一般用于程序的版本更新（**<a href="https://ci.apache.org/projects/flink/flink-docs-stable/ops/upgrading.html#step-1-take-a-savepoint-in-the-old-flink-version" target="_blank" rel="noopener">详见文档</a>**），Bug 修复，A/B Test 等场景，需要用户指定。</p>
<p>通过 -s 参数从指定的 Savepoint 启动：</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink run <span class="token operator">-</span>d <span class="token operator">-</span>s <span class="token operator">/</span>tmp<span class="token operator">/</span>savepoint<span class="token operator">/</span>savepoint<span class="token operator">-</span>f049ff<span class="token operator">-</span><span class="token number">24</span>ec0d3e0dc7 <span class="token punctuation">.</span>/examples<span class="token operator">/</span>streaming<span class="token operator">/</span><span class="token class-name">TopSpeedWindowing</span><span class="token punctuation">.</span>jar
<span class="token class-name">Starting</span> execution of program
<span class="token class-name">Executing</span> <span class="token class-name">TopSpeedWindowing</span> example <span class="token keyword">with</span> <span class="token keyword">default</span> input data <span class="token class-name"><span class="token namespace">set<span class="token punctuation">.</span></span>
Use</span> <span class="token operator">--</span>input <span class="token keyword">to</span> <span class="token namespace">specify</span> file <span class="token class-name"><span class="token namespace">input<span class="token punctuation">.</span></span>
Printing</span> result <span class="token keyword">to</span> <span class="token namespace">stdout<span class="token punctuation">.</span></span> <span class="token class-name">Use</span> <span class="token operator">--</span>output <span class="token keyword">to</span> <span class="token namespace">specify</span> output path<span class="token punctuation">.</span></code></pre><p>查看 JobManager 的日志，能够看到类似这样的 Log：</p>
<pre class="code"><code><span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">28</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">30</span><span class="token operator">:</span><span class="token number">53</span><span class="token punctuation">,</span><span class="token number">957</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>checkpoint<span class="token punctuation">.</span></span>CheckpointCoordinator</span>     
<span class="token operator">-</span> <span class="token class-name">Starting</span> job <span class="token number">790d</span><span class="token number">7</span>b98db6f6af55d04aec1d773852d from savepoint <span class="token operator">/</span>tmp<span class="token operator">/</span>savepoint<span class="token operator">/</span>savepoint<span class="token operator">-</span>f049ff<span class="token operator">-</span><span class="token number">24</span>ec0d3e0dc7 <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">28</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">30</span><span class="token operator">:</span><span class="token number">53</span><span class="token punctuation">,</span><span class="token number">959</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>checkpoint<span class="token punctuation">.</span></span>CheckpointCoordinator</span>    
 <span class="token operator">-</span> <span class="token class-name">Reset</span> the checkpoint ID of job <span class="token number">790d</span><span class="token number">7</span>b98db6f6af55d04aec1d773852d <span class="token keyword">to</span> <span class="token number">2.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">28</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">30</span><span class="token operator">:</span><span class="token number">53</span><span class="token punctuation">,</span><span class="token number">959</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>checkpoint<span class="token punctuation">.</span></span>CheckpointCoordinator</span>     
<span class="token operator">-</span> <span class="token class-name">Restoring</span> job <span class="token number">790d</span><span class="token number">7</span>b98db6f6af55d04aec1d773852d from latest valid checkpoint<span class="token operator">:</span> <span class="token class-name">Checkpoint</span> <span class="token number">1</span> @ <span class="token number">0</span> <span class="token keyword">for</span> <span class="token number">790d</span><span class="token number">7</span>b98db6f6af55d04aec1d773852d<span class="token punctuation">.</span></code></pre><h5 id="modify">Modify</h5><p>修改任务并行度。</p>
<p>为了方便演示，我们修改 conf/flink-conf.yaml 将 Task Slot 数从默认的 1 改为 4，并配置 Savepoint 目录。（Modify 参数后面接 -s 指定 Savepoint 路径当前版本可能有 Bug，提示无法识别）</p>
<pre class="code"><code>taskmanager<span class="token punctuation">.</span>numberOfTaskSlots<span class="token operator">:</span> <span class="token number">4</span>
state<span class="token punctuation">.</span>savepoints<span class="token punctuation">.</span>dir<span class="token operator">:</span> file<span class="token operator">:</span><span class="token operator">/</span><span class="token comment">//tmp/savepoint</span></code></pre><p>修改参数后需要重启集群生效，然后再启动任务：</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>stop<span class="token operator">-</span>cluster<span class="token punctuation">.</span>sh <span class="token operator">&amp;&amp;</span> bin<span class="token operator">/</span>start<span class="token operator">-</span>cluster<span class="token punctuation">.</span>sh
<span class="token class-name">Stopping</span> taskexecutor daemon <span class="token punctuation">(</span>pid<span class="token operator">:</span> <span class="token number">53139</span><span class="token punctuation">)</span> on host zkb<span class="token operator">-</span>MBP<span class="token punctuation">.</span>local<span class="token punctuation">.</span>
<span class="token class-name">Stopping</span> standalonesession daemon <span class="token punctuation">(</span>pid<span class="token operator">:</span> <span class="token number">52723</span><span class="token punctuation">)</span> on host zkb<span class="token operator">-</span>MBP<span class="token punctuation">.</span>local<span class="token punctuation">.</span>
<span class="token class-name">Starting</span> <span class="token class-name"><span class="token namespace">cluster<span class="token punctuation">.</span></span>
Starting</span> standalonesession daemon on host zkb<span class="token operator">-</span>MBP<span class="token punctuation">.</span>local<span class="token punctuation">.</span>
<span class="token class-name">Starting</span> taskexecutor daemon on host zkb<span class="token operator">-</span>MBP<span class="token punctuation">.</span>local<span class="token punctuation">.</span>

➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink run <span class="token operator">-</span>d examples<span class="token operator">/</span>streaming<span class="token operator">/</span><span class="token class-name">TopSpeedWindowing</span><span class="token punctuation">.</span>jar
<span class="token class-name">Starting</span> execution of program
<span class="token class-name">Executing</span> <span class="token class-name">TopSpeedWindowing</span> example <span class="token keyword">with</span> <span class="token keyword">default</span> input data <span class="token class-name"><span class="token namespace">set<span class="token punctuation">.</span></span>
Use</span> <span class="token operator">--</span>input <span class="token keyword">to</span> <span class="token namespace">specify</span> file <span class="token class-name"><span class="token namespace">input<span class="token punctuation">.</span></span>
Printing</span> result <span class="token keyword">to</span> <span class="token namespace">stdout<span class="token punctuation">.</span></span> <span class="token class-name">Use</span> <span class="token operator">--</span>output <span class="token keyword">to</span> <span class="token namespace">specify</span> output <span class="token class-name"><span class="token namespace">path<span class="token punctuation">.</span></span>
Job</span> has been submitted <span class="token keyword">with</span> <span class="token class-name">JobID</span> <span class="token number">7752</span>ea7b0e7303c780de9d86a5ded3fa</code></pre><p>从页面上能看到 Task Slot 变为了 4，这时候任务的默认并发度是 1。</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01niefgt1gTzyApDZxQ_!!6000000004144-2-tps-1024-412.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN016jUnHs1JvGNwWWocF_!!6000000001090-2-tps-1024-495.png" alt="null"></p>
<p>通过 Modify 命令依次将并发度修改为 4 和 3，可以看到每次 Modify 命令都会触发一次 Savepoint。</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink modify <span class="token operator">-</span>p <span class="token number">4</span> <span class="token number">7752</span>ea7b0e7303c780de9d86a5ded3fa
<span class="token class-name">Modify</span> job <span class="token number">7752</span>ea7b0e7303c780de9d86a5ded3fa<span class="token punctuation">.</span>
<span class="token class-name">Rescaled</span> job <span class="token number">7752</span>ea7b0e7303c780de9d86a5ded3fa<span class="token punctuation">.</span> <span class="token class-name">Its</span> <span class="token keyword">new</span> parallelism is <span class="token number">4.</span>

➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> ll <span class="token operator">/</span>tmp<span class="token operator">/</span>savepoint
total <span class="token number">0</span>
drwxr<span class="token operator">-</span>xr<span class="token operator">-</span>x <span class="token number">3</span> baoniu <span class="token number">96</span> <span class="token class-name">Jun</span> <span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">05</span> savepoint<span class="token operator">-</span><span class="token number">7752</span>ea<span class="token operator">-</span><span class="token number">00</span>c05b015836<span class="token operator">/</span>

➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink modify <span class="token operator">-</span>p <span class="token number">3</span> <span class="token number">7752</span>ea7b0e7303c780de9d86a5ded3fa
<span class="token class-name">Modify</span> job <span class="token number">7752</span>ea7b0e7303c780de9d86a5ded3fa<span class="token punctuation">.</span>
<span class="token class-name">Rescaled</span> job <span class="token number">7752</span>ea7b0e7303c780de9d86a5ded3fa<span class="token punctuation">.</span> <span class="token class-name">Its</span> <span class="token keyword">new</span> parallelism is <span class="token number">3.</span>

➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> ll <span class="token operator">/</span>tmp<span class="token operator">/</span>savepoint
total <span class="token number">0</span>
drwxr<span class="token operator">-</span>xr<span class="token operator">-</span>x <span class="token number">3</span> baoniu <span class="token number">96</span> <span class="token class-name">Jun</span> <span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">08</span> savepoint<span class="token operator">-</span><span class="token number">7752</span>ea<span class="token operator">-</span><span class="token number">449</span>b131b2bd4<span class="token operator">/</span></code></pre><p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01VLX0KW1w3vH153YSZ_!!6000000006253-2-tps-1024-499.png" alt="null"></p>
<p>查看 JobManager 的日志，可以看到：</p>
<pre class="code"><code><span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">05</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">179</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>checkpoint<span class="token punctuation">.</span></span>CheckpointCoordinator</span>     <span class="token operator">-</span> <span class="token class-name">Starting</span> job <span class="token number">7752</span>ea7b0e7303c780de9d86a5ded3fa from savepoint file<span class="token operator">:</span><span class="token operator">/</span>tmp<span class="token operator">/</span>savepoint<span class="token operator">/</span>savepoint<span class="token operator">-</span><span class="token number">790d</span><span class="token number">7</span>b<span class="token operator">-</span><span class="token number">3581698f</span><span class="token number">007</span>e <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">05</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">182</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>checkpoint<span class="token punctuation">.</span></span>CheckpointCoordinator</span>     <span class="token operator">-</span> <span class="token class-name">Reset</span> the checkpoint ID of job <span class="token number">7752</span>ea7b0e7303c780de9d86a5ded3fa <span class="token keyword">to</span> <span class="token number">3.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">05</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">182</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>checkpoint<span class="token punctuation">.</span></span>CheckpointCoordinator</span>     <span class="token operator">-</span> <span class="token class-name">Restoring</span> job <span class="token number">790d</span><span class="token number">7</span>b98db6f6af55d04aec1d773852d from latest valid checkpoint<span class="token operator">:</span> <span class="token class-name">Checkpoint</span> <span class="token number">2</span> @ <span class="token number">0</span> <span class="token keyword">for</span> <span class="token number">7752</span>ea7b0e7303c780de9d86a5ded3fa<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">05</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">184</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>checkpoint<span class="token punctuation">.</span></span>CheckpointCoordinator</span>     <span class="token operator">-</span> <span class="token class-name">No</span> master state <span class="token keyword">to</span> <span class="token namespace">restore</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">05</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">184</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>executiongraph<span class="token punctuation">.</span></span>ExecutionGraph</span>        <span class="token operator">-</span> <span class="token class-name">Job</span> <span class="token class-name">CarTopSpeedWindowingExample</span> <span class="token punctuation">(</span><span class="token number">7752</span>ea7b0e7303c780de9d86a5ded3fa<span class="token punctuation">)</span> switched from state RUNNING <span class="token keyword">to</span> SUSPENDING<span class="token punctuation">.</span>
<span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>FlinkException</span><span class="token operator">:</span> <span class="token class-name">Job</span> is being rescaled<span class="token punctuation">.</span></code></pre><h5 id="info">Info</h5><p>Info 命令是用来查看 Flink 任务的执行计划（StreamGraph）的。</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>flink info examples<span class="token operator">/</span>streaming<span class="token operator">/</span><span class="token class-name">TopSpeedWindowing</span><span class="token punctuation">.</span>jar
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token class-name">Execution</span> <span class="token class-name">Plan</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token punctuation">{</span><span class="token string">"nodes"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"type"</span><span class="token operator">:</span><span class="token string">"Source: Custom Source"</span><span class="token punctuation">,</span><span class="token string">"pact"</span><span class="token operator">:</span><span class="token string">"Data Source"</span><span class="token punctuation">,</span><span class="token string">"contents"</span><span class="token operator">:</span><span class="token string">"Source: Custom Source"</span><span class="token punctuation">,</span><span class="token string">"parallelism"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"type"</span><span class="token operator">:</span><span class="token string">"Timestamps/Watermarks"</span><span class="token punctuation">,</span><span class="token string">"pact"</span><span class="token operator">:</span><span class="token string">"Operator"</span><span class="token punctuation">,</span><span class="token string">"contents"</span><span class="token operator">:</span><span class="token string">"Timestamps/Watermarks"</span><span class="token punctuation">,</span><span class="token string">"parallelism"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"predecessors"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"ship_strategy"</span><span class="token operator">:</span><span class="token string">"FORWARD"</span><span class="token punctuation">,</span><span class="token string">"side"</span><span class="token operator">:</span><span class="token string">"second"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"type"</span><span class="token operator">:</span><span class="token string">"Window(GlobalWindows(), DeltaTrigger, TimeEvictor, ComparableAggregator, PassThroughWindowFunction)"</span><span class="token punctuation">,</span><span class="token string">"pact"</span><span class="token operator">:</span><span class="token string">"Operator"</span><span class="token punctuation">,</span><span class="token string">"contents"</span><span class="token operator">:</span><span class="token string">"Window(GlobalWindows(), DeltaTrigger, TimeEvictor, ComparableAggregator, PassThroughWindowFunction)"</span><span class="token punctuation">,</span><span class="token string">"parallelism"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"predecessors"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"ship_strategy"</span><span class="token operator">:</span><span class="token string">"HASH"</span><span class="token punctuation">,</span><span class="token string">"side"</span><span class="token operator">:</span><span class="token string">"second"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"type"</span><span class="token operator">:</span><span class="token string">"Sink: Print to Std. Out"</span><span class="token punctuation">,</span><span class="token string">"pact"</span><span class="token operator">:</span><span class="token string">"Data Sink"</span><span class="token punctuation">,</span><span class="token string">"contents"</span><span class="token operator">:</span><span class="token string">"Sink: Print to Std. Out"</span><span class="token punctuation">,</span><span class="token string">"parallelism"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"predecessors"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"ship_strategy"</span><span class="token operator">:</span><span class="token string">"FORWARD"</span><span class="token punctuation">,</span><span class="token string">"side"</span><span class="token operator">:</span><span class="token string">"second"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></code></pre><p>拷贝输出的 Json 内容，粘贴到这个网站：<strong><a href="http://flink.apache.org/visualizer/" target="_blank" rel="noopener">http://flink.apache.org/visualizer/</a></strong></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01Tt24Rc1U4YZxijjlf_!!6000000002464-2-tps-1024-232.png" alt="null"></p>
<p>可以和实际运行的物理执行计划对比：</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01AOirxN1UZhVrzpYRa_!!6000000002532-2-tps-1024-400.png" alt="null"></p>
<h4 id="312-yarn-per-job">3.1.2 Yarn per-job</h4><h5 id="单任务-attach-模式">单任务 Attach 模式</h5><p>默认是 Attach 模式，即客户端会一直等待直到程序结束才会退出。</p>
<ul>
<li>通过 -m yarn-cluster 指定 Yarn 模式</li>
<li>Yarn 上显示名字为 Flink session cluster，这个 Batch 的 Wordcount 任务运行完会 FINISHED。</li>
<li>客户端能看到结果输出</li>
</ul>
<pre class="code"><code><span class="token punctuation">[</span>admin<span class="token annotation punctuation">@z17.sqa.zth</span> <span class="token operator">/</span>home<span class="token operator">/</span>admin<span class="token operator">/</span>flink<span class="token operator">/</span>flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span><span class="token punctuation">]</span>
$echo $HADOOP_CONF_DIR
<span class="token operator">/</span>etc<span class="token operator">/</span>hadoop<span class="token operator">/</span>conf<span class="token operator">/</span>

<span class="token punctuation">[</span>admin<span class="token annotation punctuation">@z17.sqa.zth</span> <span class="token operator">/</span>home<span class="token operator">/</span>admin<span class="token operator">/</span>flink<span class="token operator">/</span>flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span><span class="token punctuation">]</span>
$<span class="token punctuation">.</span>/bin<span class="token operator">/</span>flink run <span class="token operator">-</span>m yarn<span class="token operator">-</span>cluster <span class="token punctuation">.</span>/examples<span class="token operator">/</span>batch<span class="token operator">/</span><span class="token class-name">WordCount</span><span class="token punctuation">.</span>jar

<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">511</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span>RMProxy</span>                         <span class="token operator">-</span> <span class="token class-name">Connecting</span> <span class="token keyword">to</span> <span class="token class-name">ResourceManager</span> at z05c05217<span class="token punctuation">.</span>sqa<span class="token punctuation">.</span>zth<span class="token punctuation">.</span>tbsite<span class="token punctuation">.</span>net<span class="token operator">/</span><span class="token number">11.163</span><span class="token number">.188</span><span class="token number">.29</span><span class="token operator">:</span><span class="token number">8050</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">690</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">No</span> path <span class="token keyword">for</span> the flink jar <span class="token class-name"><span class="token namespace">passed<span class="token punctuation">.</span></span> Using</span> the location of <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>YarnClusterDescriptor</span> <span class="token keyword">to</span> <span class="token namespace">locate</span> the jar
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">690</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">No</span> path <span class="token keyword">for</span> the flink jar <span class="token class-name"><span class="token namespace">passed<span class="token punctuation">.</span></span> Using</span> the location of <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>YarnClusterDescriptor</span> <span class="token keyword">to</span> <span class="token namespace">locate</span> the jar
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">907</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Cluster</span> specification<span class="token operator">:</span> <span class="token class-name">ClusterSpecification</span><span class="token punctuation">{</span>masterMemoryMB<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span> taskManagerMemoryMB<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span> numberTaskManagers<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> slotsPerTaskManager<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">}</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">430</span> WARN  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hdfs<span class="token punctuation">.</span>shortcircuit<span class="token punctuation">.</span></span>DomainSocketFactory</span>       <span class="token operator">-</span> <span class="token class-name">The</span> <span class="token keyword">short</span><span class="token operator">-</span>circuit local reads feature cannot be used because libhadoop cannot be loaded<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">438</span> WARN  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">The</span> configuration directory <span class="token punctuation">(</span><span class="token string">'/Users/baoniu/Documents/work/tool/flink/flink-1.7.2/conf'</span><span class="token punctuation">)</span> contains both LOG4J and <span class="token class-name">Logback</span> configuration <span class="token class-name"><span class="token namespace">files<span class="token punctuation">.</span></span> Please</span> delete or rename one of them<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">239</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Submitting</span> application master application_1532332183347_0724
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">276</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>client<span class="token punctuation">.</span>api<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>YarnClientImpl</span>         <span class="token operator">-</span> <span class="token class-name">Submitted</span> application application_1532332183347_0724
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">276</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Waiting</span> <span class="token keyword">for</span> the cluster <span class="token keyword">to</span> <span class="token namespace">be</span> allocated
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">281</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Deploying</span> cluster<span class="token punctuation">,</span> current state ACCEPTED
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">426</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> YARN application has been deployed <span class="token class-name"><span class="token namespace">successfully<span class="token punctuation">.</span></span>
Starting</span> execution of program
<span class="token class-name">Executing</span> <span class="token class-name">WordCount</span> example <span class="token keyword">with</span> <span class="token keyword">default</span> input data <span class="token class-name"><span class="token namespace">set<span class="token punctuation">.</span></span>
Use</span> <span class="token operator">--</span>input <span class="token keyword">to</span> <span class="token namespace">specify</span> file <span class="token class-name"><span class="token namespace">input<span class="token punctuation">.</span></span>
Printing</span> result <span class="token keyword">to</span> <span class="token namespace">stdout<span class="token punctuation">.</span></span> <span class="token class-name">Use</span> <span class="token operator">--</span>output <span class="token keyword">to</span> <span class="token namespace">specify</span> output path<span class="token punctuation">.</span>
<span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>action<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>after<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>against<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>all<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">(</span>would<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>wrong<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>you<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token class-name">Program</span> execution finished
<span class="token class-name">Job</span> <span class="token keyword">with</span> <span class="token class-name">JobID</span> <span class="token number">8</span>bfe7568cb5c3254af30cbbd9cd5971e has <span class="token class-name"><span class="token namespace">finished<span class="token punctuation">.</span></span>
Job</span> <span class="token class-name">Runtime</span><span class="token operator">:</span> <span class="token number">9371</span> ms
<span class="token class-name">Accumulator</span> <span class="token class-name">Results</span><span class="token operator">:</span>
<span class="token operator">-</span> <span class="token number">2</span>bed2c5506e9237fb85625416a1bc508 <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>ArrayList</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">170</span> elements<span class="token punctuation">]</span></code></pre><p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01K30UOI28hYwQohbpD_!!6000000007964-2-tps-1024-417.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN018AUeXx1b4HeZIM2Qe_!!6000000003411-2-tps-1024-539.png" alt="null"></p>
<p>如果我们以 Attach 模式运行 Streaming 的任务，客户端会一直等待不退出，可以运行以下的例子试验下：</p>
<pre class="code"><code><span class="token punctuation">.</span>/bin<span class="token operator">/</span>flink run <span class="token operator">-</span>m yarn<span class="token operator">-</span>cluster <span class="token punctuation">.</span>/examples<span class="token operator">/</span>streaming<span class="token operator">/</span><span class="token class-name">TopSpeedWindowing</span><span class="token punctuation">.</span>jar</code></pre><h5 id="单任务-detached-模式">单任务 Detached 模式</h5><ul>
<li>由于是 Detached 模式，客户端提交完任务就退出了</li>
<li>Yarn 上显示为 Flink per-job cluster</li>
</ul>
<pre class="code"><code>$<span class="token punctuation">.</span>/bin<span class="token operator">/</span>flink run <span class="token operator">-</span>yd <span class="token operator">-</span>m yarn<span class="token operator">-</span>cluster <span class="token punctuation">.</span>/examples<span class="token operator">/</span>streaming<span class="token operator">/</span><span class="token class-name">TopSpeedWindowing</span><span class="token punctuation">.</span>jar

<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">59</span><span class="token punctuation">,</span><span class="token number">247</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span>RMProxy</span>                         <span class="token operator">-</span> <span class="token class-name">Connecting</span> <span class="token keyword">to</span> <span class="token class-name">ResourceManager</span> at z05c05217<span class="token punctuation">.</span>sqa<span class="token punctuation">.</span>zth<span class="token punctuation">.</span>tbsite<span class="token punctuation">.</span>net<span class="token operator">/</span><span class="token number">11.163</span><span class="token number">.188</span><span class="token number">.29</span><span class="token operator">:</span><span class="token number">8050</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">59</span><span class="token punctuation">,</span><span class="token number">428</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">No</span> path <span class="token keyword">for</span> the flink jar <span class="token class-name"><span class="token namespace">passed<span class="token punctuation">.</span></span> Using</span> the location of <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>YarnClusterDescriptor</span> <span class="token keyword">to</span> <span class="token namespace">locate</span> the jar
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">59</span><span class="token punctuation">,</span><span class="token number">428</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">No</span> path <span class="token keyword">for</span> the flink jar <span class="token class-name"><span class="token namespace">passed<span class="token punctuation">.</span></span> Using</span> the location of <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>YarnClusterDescriptor</span> <span class="token keyword">to</span> <span class="token namespace">locate</span> the jar
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">59</span><span class="token punctuation">,</span><span class="token number">940</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Cluster</span> specification<span class="token operator">:</span> <span class="token class-name">ClusterSpecification</span><span class="token punctuation">{</span>masterMemoryMB<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span> taskManagerMemoryMB<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span> numberTaskManagers<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> slotsPerTaskManager<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">}</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">,</span><span class="token number">427</span> WARN  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hdfs<span class="token punctuation">.</span>shortcircuit<span class="token punctuation">.</span></span>DomainSocketFactory</span>       <span class="token operator">-</span> <span class="token class-name">The</span> <span class="token keyword">short</span><span class="token operator">-</span>circuit local reads feature cannot be used because libhadoop cannot be loaded<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">,</span><span class="token number">436</span> WARN  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">The</span> configuration directory <span class="token punctuation">(</span><span class="token string">'/Users/baoniu/Documents/work/tool/flink/flink-1.7.2/conf'</span><span class="token punctuation">)</span> contains both LOG4J and <span class="token class-name">Logback</span> configuration <span class="token class-name"><span class="token namespace">files<span class="token punctuation">.</span></span> Please</span> delete or rename one of them<span class="token punctuation">.</span>
<span class="token operator">^</span><span class="token annotation punctuation">@2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">113</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Submitting</span> application master application_1532332183347_0729
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">151</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>client<span class="token punctuation">.</span>api<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>YarnClientImpl</span>         <span class="token operator">-</span> <span class="token class-name">Submitted</span> application application_1532332183347_0729
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">151</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Waiting</span> <span class="token keyword">for</span> the cluster <span class="token keyword">to</span> <span class="token namespace">be</span> allocated
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">155</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Deploying</span> cluster<span class="token punctuation">,</span> current state ACCEPTED
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">275</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> YARN application has been deployed successfully<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">275</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">The</span> <span class="token class-name">Flink</span> YARN client has been started in detached <span class="token class-name"><span class="token namespace">mode<span class="token punctuation">.</span></span> In</span> order <span class="token keyword">to</span> <span class="token namespace">stop</span> <span class="token class-name">Flink</span> on YARN<span class="token punctuation">,</span> use the following command or a YARN web <span class="token keyword">interface</span> <span class="token keyword">to</span> <span class="token namespace">stop</span> it<span class="token operator">:</span>
yarn application <span class="token operator">-</span>kill application_1532332183347_0729
<span class="token class-name">Please</span> also note that the temporary files of the YARN session in the home directory will not be <span class="token class-name"><span class="token namespace">removed<span class="token punctuation">.</span></span>
Job</span> has been submitted <span class="token keyword">with</span> <span class="token class-name">JobID</span> e61b9945c33c300906ad50a9a11f36df</code></pre><p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01H2P3Eu2AN4S6aGPee_!!6000000008190-2-tps-1024-348.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01bh4bIL24qwajN8OZJ_!!6000000007443-2-tps-1024-377.png" alt="null"></p>
<h4 id="313-yarn-session">3.1.3 Yarn session</h4><h5 id="启动-session">启动 Session</h5><pre class="code"><code><span class="token punctuation">.</span>/bin<span class="token operator">/</span>yarn<span class="token operator">-</span>session<span class="token punctuation">.</span>sh <span class="token operator">-</span>tm <span class="token number">2048</span> <span class="token operator">-</span>s <span class="token number">3</span></code></pre><p>表示启动一个 Yarn session 集群，每个 TM 的内存是 2 G，每个 TM 有 3 个 Slot。(注意：-n 参数不生效)</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> <span class="token punctuation">.</span>/bin<span class="token operator">/</span>yarn<span class="token operator">-</span>session<span class="token punctuation">.</span>sh <span class="token operator">-</span>tm <span class="token number">2048</span> <span class="token operator">-</span>s <span class="token number">3</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">177</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> jobmanager<span class="token punctuation">.</span>rpc<span class="token punctuation">.</span>address<span class="token punctuation">,</span> localhost
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">179</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> jobmanager<span class="token punctuation">.</span>rpc<span class="token punctuation">.</span>port<span class="token punctuation">,</span> <span class="token number">6123</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">179</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> jobmanager<span class="token punctuation">.</span>heap<span class="token punctuation">.</span>size<span class="token punctuation">,</span> <span class="token number">1024</span>m
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">179</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> taskmanager<span class="token punctuation">.</span>heap<span class="token punctuation">.</span>size<span class="token punctuation">,</span> <span class="token number">1024</span>m
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">179</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> taskmanager<span class="token punctuation">.</span>numberOfTaskSlots<span class="token punctuation">,</span> <span class="token number">4</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">179</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> state<span class="token punctuation">.</span>savepoints<span class="token punctuation">.</span>dir<span class="token punctuation">,</span> file<span class="token operator">:</span><span class="token operator">/</span><span class="token comment">//tmp/savepoint</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">180</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> parallelism<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">,</span> <span class="token number">1</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">180</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> rest<span class="token punctuation">.</span>port<span class="token punctuation">,</span> <span class="token number">8081</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">644</span> WARN  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>NativeCodeLoader</span>                       <span class="token operator">-</span> <span class="token class-name">Unable</span> <span class="token keyword">to</span> <span class="token namespace">load</span> <span class="token keyword">native</span><span class="token operator">-</span>hadoop library <span class="token keyword">for</span> your platform<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> using builtin<span class="token operator">-</span>java classes where applicable
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">746</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>security<span class="token punctuation">.</span>modules<span class="token punctuation">.</span></span>HadoopModule</span>        <span class="token operator">-</span> <span class="token class-name">Hadoop</span> user set <span class="token keyword">to</span> <span class="token namespace">baoniu</span> <span class="token punctuation">(</span>auth<span class="token operator">:</span>SIMPLE<span class="token punctuation">)</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">848</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span>RMProxy</span>                         <span class="token operator">-</span> <span class="token class-name">Connecting</span> <span class="token keyword">to</span> <span class="token class-name">ResourceManager</span> at z05c05217<span class="token punctuation">.</span>sqa<span class="token punctuation">.</span>zth<span class="token punctuation">.</span>tbsite<span class="token punctuation">.</span>net<span class="token operator">/</span><span class="token number">11.163</span><span class="token number">.188</span><span class="token number">.29</span><span class="token operator">:</span><span class="token number">8050</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">51</span><span class="token punctuation">,</span><span class="token number">148</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Cluster</span> specification<span class="token operator">:</span> <span class="token class-name">ClusterSpecification</span><span class="token punctuation">{</span>masterMemoryMB<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span> taskManagerMemoryMB<span class="token operator">=</span><span class="token number">2048</span><span class="token punctuation">,</span> numberTaskManagers<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> slotsPerTaskManager<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">}</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">51</span><span class="token punctuation">,</span><span class="token number">588</span> WARN  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hdfs<span class="token punctuation">.</span>shortcircuit<span class="token punctuation">.</span></span>DomainSocketFactory</span>       <span class="token operator">-</span> <span class="token class-name">The</span> <span class="token keyword">short</span><span class="token operator">-</span>circuit local reads feature cannot be used because libhadoop cannot be loaded<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">51</span><span class="token punctuation">,</span><span class="token number">596</span> WARN  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">The</span> configuration directory <span class="token punctuation">(</span><span class="token string">'/Users/baoniu/Documents/work/tool/flink/flink-1.7.2/conf'</span><span class="token punctuation">)</span> contains both LOG4J and <span class="token class-name">Logback</span> configuration <span class="token class-name"><span class="token namespace">files<span class="token punctuation">.</span></span> Please</span> delete or rename one of them<span class="token punctuation">.</span>
<span class="token operator">^</span><span class="token annotation punctuation">@2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">304</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Submitting</span> application master application_1532332183347_0726
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">336</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>client<span class="token punctuation">.</span>api<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>YarnClientImpl</span>         <span class="token operator">-</span> <span class="token class-name">Submitted</span> application application_1532332183347_0726
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">336</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Waiting</span> <span class="token keyword">for</span> the cluster <span class="token keyword">to</span> <span class="token namespace">be</span> allocated
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">340</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Deploying</span> cluster<span class="token punctuation">,</span> current state ACCEPTED
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">07</span><span class="token punctuation">,</span><span class="token number">722</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> YARN application has been deployed successfully<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">08</span><span class="token punctuation">,</span><span class="token number">050</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>rest<span class="token punctuation">.</span></span>RestClient</span>                      <span class="token operator">-</span> <span class="token class-name">Rest</span> client endpoint <span class="token class-name"><span class="token namespace">started<span class="token punctuation">.</span></span>
Flink</span> <span class="token class-name">JobManager</span> is now running on z07<span class="token punctuation">.</span>sqa<span class="token punctuation">.</span>net<span class="token operator">:</span><span class="token number">37109</span> <span class="token keyword">with</span> <span class="token namespace">leader</span> id <span class="token number">00000000</span><span class="token operator">-</span><span class="token number">0000</span><span class="token operator">-</span><span class="token number">0000</span><span class="token operator">-</span><span class="token number">0000</span><span class="token operator">-</span><span class="token number">000000000000.</span>
<span class="token class-name">JobManager</span> <span class="token class-name">Web</span> <span class="token class-name">Interface</span><span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>z07<span class="token punctuation">.</span>sqa<span class="token punctuation">.</span>net<span class="token operator">:</span><span class="token number">37109</span></code></pre><p>客户端默认是 Attach 模式，不会退出：</p>
<ul>
<li><p>可以 ctrl + c 退出，然后再通过 ./bin/yarn-session.sh -id application_1532332183347_0726 连上来；</p>
</li>
<li><p>或者启动的时候用 -d 则为 detached 模式 </p>
<p>Yarn 上显示为 Flink session cluster；</p>
</li>
</ul>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01TinIn926XMtXFa0A3_!!6000000007671-2-tps-1024-348.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01dj6c5T1YrncuMuVo5_!!6000000003113-2-tps-1024-314.png" alt="null"></p>
<ul>
<li>在本机的临时目录（有些机器是 /tmp 目录）下会生成一个文件：</li>
</ul>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> cat <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>folders<span class="token operator">/</span><span class="token number">2</span>b<span class="token operator">/</span>r6d49pcs23z43b8fqsyz885c0000gn<span class="token operator">/</span><span class="token class-name">T</span><span class="token operator">/</span><span class="token punctuation">.</span>yarn<span class="token operator">-</span>properties<span class="token operator">-</span>baoniu
#<span class="token class-name">Generated</span> YARN properties file
#<span class="token class-name">Mon</span> <span class="token class-name">Jun</span> <span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">08</span> CST <span class="token number">2019</span>
parallelism<span class="token operator">=</span><span class="token number">3</span>
dynamicPropertiesString<span class="token operator">=</span>
applicationID<span class="token operator">=</span>application_1532332183347_0726</code></pre><h5 id="提交任务">提交任务</h5><pre class="code"><code><span class="token punctuation">.</span>/bin<span class="token operator">/</span>flink run <span class="token punctuation">.</span>/examples<span class="token operator">/</span>batch<span class="token operator">/</span><span class="token class-name">WordCount</span><span class="token punctuation">.</span>jar</code></pre><p>将会根据 /tmp/.yarn-properties-admin 文件内容提交到了刚启动的 Session。</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> <span class="token punctuation">.</span>/bin<span class="token operator">/</span>flink run <span class="token punctuation">.</span>/examples<span class="token operator">/</span>batch<span class="token operator">/</span><span class="token class-name">WordCount</span><span class="token punctuation">.</span>jar
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">26</span><span class="token operator">:</span><span class="token number">42</span><span class="token punctuation">,</span><span class="token number">767</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">Found</span> <span class="token class-name">Yarn</span> properties file under <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>folders<span class="token operator">/</span><span class="token number">2</span>b<span class="token operator">/</span>r6d49pcs23z43b8fqsyz885c0000gn<span class="token operator">/</span><span class="token class-name">T</span><span class="token operator">/</span><span class="token punctuation">.</span>yarn<span class="token operator">-</span>properties<span class="token operator">-</span>baoniu<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">26</span><span class="token operator">:</span><span class="token number">42</span><span class="token punctuation">,</span><span class="token number">767</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">Found</span> <span class="token class-name">Yarn</span> properties file under <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>folders<span class="token operator">/</span><span class="token number">2</span>b<span class="token operator">/</span>r6d49pcs23z43b8fqsyz885c0000gn<span class="token operator">/</span><span class="token class-name">T</span><span class="token operator">/</span><span class="token punctuation">.</span>yarn<span class="token operator">-</span>properties<span class="token operator">-</span>baoniu<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">26</span><span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">,</span><span class="token number">058</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> YARN properties set <span class="token keyword">default</span> parallelism <span class="token keyword">to</span> <span class="token number">3</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">26</span><span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">,</span><span class="token number">058</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> YARN properties set <span class="token keyword">default</span> parallelism <span class="token keyword">to</span> <span class="token number">3</span>
YARN properties set <span class="token keyword">default</span> parallelism <span class="token keyword">to</span> <span class="token number">3</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">26</span><span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">,</span><span class="token number">097</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span>RMProxy</span>                         <span class="token operator">-</span> <span class="token class-name">Connecting</span> <span class="token keyword">to</span> <span class="token class-name">ResourceManager</span> at z05c05217<span class="token punctuation">.</span>sqa<span class="token punctuation">.</span>zth<span class="token punctuation">.</span>tbsite<span class="token punctuation">.</span>net<span class="token operator">/</span><span class="token number">11.163</span><span class="token number">.188</span><span class="token number">.29</span><span class="token operator">:</span><span class="token number">8050</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">26</span><span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">,</span><span class="token number">229</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">No</span> path <span class="token keyword">for</span> the flink jar <span class="token class-name"><span class="token namespace">passed<span class="token punctuation">.</span></span> Using</span> the location of <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>YarnClusterDescriptor</span> <span class="token keyword">to</span> <span class="token namespace">locate</span> the jar
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">26</span><span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">,</span><span class="token number">229</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">No</span> path <span class="token keyword">for</span> the flink jar <span class="token class-name"><span class="token namespace">passed<span class="token punctuation">.</span></span> Using</span> the location of <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>YarnClusterDescriptor</span> <span class="token keyword">to</span> <span class="token namespace">locate</span> the jar
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">26</span><span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">,</span><span class="token number">327</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Found</span> application <span class="token class-name">JobManager</span> host name <span class="token string">'z05c07216.sqa.zth.tbsite.net'</span> and port <span class="token string">'37109'</span> from supplied application id <span class="token string">'application_1532332183347_0726'</span>
<span class="token class-name">Starting</span> execution of program
<span class="token class-name">Executing</span> <span class="token class-name">WordCount</span> example <span class="token keyword">with</span> <span class="token keyword">default</span> input data <span class="token class-name"><span class="token namespace">set<span class="token punctuation">.</span></span>
Use</span> <span class="token operator">--</span>input <span class="token keyword">to</span> <span class="token namespace">specify</span> file <span class="token class-name"><span class="token namespace">input<span class="token punctuation">.</span></span>
Printing</span> result <span class="token keyword">to</span> <span class="token namespace">stdout<span class="token punctuation">.</span></span> <span class="token class-name">Use</span> <span class="token operator">--</span>output <span class="token keyword">to</span> <span class="token namespace">specify</span> output path<span class="token punctuation">.</span>
<span class="token operator">^</span>@<span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>action<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>after<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>against<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>all<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>and<span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">(</span>wrong<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>you<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token class-name">Program</span> execution finished
<span class="token class-name">Job</span> <span class="token keyword">with</span> <span class="token class-name">JobID</span> ad9b0f1feed6d0bf6ba4e0f18b1e65ef has <span class="token class-name"><span class="token namespace">finished<span class="token punctuation">.</span></span>
Job</span> <span class="token class-name">Runtime</span><span class="token operator">:</span> <span class="token number">9152</span> ms
<span class="token class-name">Accumulator</span> <span class="token class-name">Results</span><span class="token operator">:</span>
<span class="token operator">-</span> fd07c75d503d0d9a99e4f27dd153114c <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>ArrayList</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">170</span> elements<span class="token punctuation">]</span></code></pre><p>运行结束后 TM 的资源会释放。</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01Ggrq3j21TdaeqtXU4_!!6000000006986-2-tps-1024-481.png" alt="null"></p>
<h5 id="提交到指定的-session">提交到指定的 Session</h5><p>通过 -yid 参数来提交到指定的 Session。</p>
<pre class="code"><code>$<span class="token punctuation">.</span>/bin<span class="token operator">/</span>flink run <span class="token operator">-</span>d <span class="token operator">-</span>p <span class="token number">30</span> <span class="token operator">-</span>m yarn<span class="token operator">-</span>cluster <span class="token operator">-</span>yid application_1532332183347_0708 <span class="token punctuation">.</span>/examples<span class="token operator">/</span>streaming<span class="token operator">/</span><span class="token class-name">TopSpeedWindowing</span><span class="token punctuation">.</span>jar

<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">36</span><span class="token operator">:</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">668</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span>RMProxy</span>                         <span class="token operator">-</span> <span class="token class-name">Connecting</span> <span class="token keyword">to</span> <span class="token class-name">ResourceManager</span> at z05c05217<span class="token punctuation">.</span>sqa<span class="token punctuation">.</span>zth<span class="token punctuation">.</span>tbsite<span class="token punctuation">.</span>net<span class="token operator">/</span><span class="token number">11.163</span><span class="token number">.188</span><span class="token number">.29</span><span class="token operator">:</span><span class="token number">8050</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">36</span><span class="token operator">:</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">773</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">No</span> path <span class="token keyword">for</span> the flink jar <span class="token class-name"><span class="token namespace">passed<span class="token punctuation">.</span></span> Using</span> the location of <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>YarnClusterDescriptor</span> <span class="token keyword">to</span> <span class="token namespace">locate</span> the jar
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">36</span><span class="token operator">:</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">773</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">No</span> path <span class="token keyword">for</span> the flink jar <span class="token class-name"><span class="token namespace">passed<span class="token punctuation">.</span></span> Using</span> the location of <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>YarnClusterDescriptor</span> <span class="token keyword">to</span> <span class="token namespace">locate</span> the jar
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">36</span><span class="token operator">:</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">837</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Found</span> application <span class="token class-name">JobManager</span> host name <span class="token string">'z05c05218.sqa.zth.tbsite.net'</span> and port <span class="token string">'60783'</span> from supplied application id <span class="token string">'application_1532332183347_0708'</span>
<span class="token class-name">Starting</span> execution of program
<span class="token class-name">Executing</span> <span class="token class-name">TopSpeedWindowing</span> example <span class="token keyword">with</span> <span class="token keyword">default</span> input data <span class="token class-name"><span class="token namespace">set<span class="token punctuation">.</span></span>
Use</span> <span class="token operator">--</span>input <span class="token keyword">to</span> <span class="token namespace">specify</span> file <span class="token class-name"><span class="token namespace">input<span class="token punctuation">.</span></span>
Printing</span> result <span class="token keyword">to</span> <span class="token namespace">stdout<span class="token punctuation">.</span></span> <span class="token class-name">Use</span> <span class="token operator">--</span>output <span class="token keyword">to</span> <span class="token namespace">specify</span> output <span class="token class-name"><span class="token namespace">path<span class="token punctuation">.</span></span>
Job</span> has been submitted <span class="token keyword">with</span> <span class="token class-name">JobID</span> <span class="token number">58d</span><span class="token number">5049</span>ebbf28d515159f2f88563f5fd</code></pre><p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01nKP2n61IoYyar6F9u_!!6000000000940-2-tps-1024-526.png" alt="null"></p>
<p>注：<a href="https://github.com/apache/flink/commits/blink" target="_blank" rel="noopener"><strong>Blink版本</strong></a> 的 Session 与 Flink 的 Session 的区别：</p>
<ul>
<li>Flink 的 session -n 参数不生效，而且不会提前启动 TM；</li>
<li>Blink 的 session 可以通过 -n 指定启动多少个 TM，而且 TM 会提前起来；</li>
</ul>
<h3 id="32-scala-shell">3.2 Scala Shell</h3><p>官方文档：<strong><a href="https://ci.apache.org/projects/flink/flink-docs-release-1.7/ops/scala_shell.html" target="_blank" rel="noopener">https://ci.apache.org/projects/flink/flink-docs-release-1.7/ops/scala_shell.html</a></strong></p>
<h4 id="321-deploy">3.2.1 Deploy</h4><h5 id="local">Local</h5><pre class="code"><code>$bin<span class="token operator">/</span>start<span class="token operator">-</span>scala<span class="token operator">-</span>shell<span class="token punctuation">.</span>sh local
<span class="token class-name">Starting</span> <span class="token class-name">Flink</span> <span class="token class-name">Shell</span><span class="token operator">:</span>
<span class="token class-name">Starting</span> local <span class="token class-name">Flink</span> cluster <span class="token punctuation">(</span>host<span class="token operator">:</span> localhost<span class="token punctuation">,</span> port<span class="token operator">:</span> <span class="token number">8081</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token class-name">Connecting</span> <span class="token keyword">to</span> <span class="token class-name">Flink</span> cluster <span class="token punctuation">(</span>host<span class="token operator">:</span> localhost<span class="token punctuation">,</span> port<span class="token operator">:</span> <span class="token number">8081</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
scala<span class="token operator">&gt;</span></code></pre><p>任务运行说明：</p>
<ul>
<li>Batch 任务内置了 benv 变量，通过 print() 将结果输出到控制台；</li>
<li>Streaming 任务内置了 senv 变量，通过 senv.execute(“job name”) 来提交任务，且 Datastream 的输出只有在 Local 模式下打印到控制台；</li>
</ul>
<h5 id="remote">Remote</h5><p>先启动一个 yarn session cluster：</p>
<pre class="code"><code>$<span class="token punctuation">.</span>/bin<span class="token operator">/</span>yarn<span class="token operator">-</span>session<span class="token punctuation">.</span>sh  <span class="token operator">-</span>tm <span class="token number">2048</span> <span class="token operator">-</span>s <span class="token number">3</span>

<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">52</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">341</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> jobmanager<span class="token punctuation">.</span>rpc<span class="token punctuation">.</span>address<span class="token punctuation">,</span> localhost
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">52</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">342</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> jobmanager<span class="token punctuation">.</span>rpc<span class="token punctuation">.</span>port<span class="token punctuation">,</span> <span class="token number">6123</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">52</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">342</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> jobmanager<span class="token punctuation">.</span>heap<span class="token punctuation">.</span>size<span class="token punctuation">,</span> <span class="token number">1024</span>m
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">52</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">343</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> taskmanager<span class="token punctuation">.</span>heap<span class="token punctuation">.</span>size<span class="token punctuation">,</span> <span class="token number">1024</span>m
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">52</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">343</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> taskmanager<span class="token punctuation">.</span>numberOfTaskSlots<span class="token punctuation">,</span> <span class="token number">4</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">52</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">343</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> parallelism<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">,</span> <span class="token number">1</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">52</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">343</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> state<span class="token punctuation">.</span>savepoints<span class="token punctuation">.</span>dir<span class="token punctuation">,</span> file<span class="token operator">:</span><span class="token operator">/</span><span class="token comment">//tmp/savepoint</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">52</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">343</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            
… <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token class-name">Flink</span> <span class="token class-name">JobManager</span> is now running on z054<span class="token punctuation">.</span>sqa<span class="token punctuation">.</span>net<span class="token operator">:</span><span class="token number">28665</span> <span class="token keyword">with</span> <span class="token namespace">leader</span> id <span class="token number">00000000</span><span class="token operator">-</span><span class="token number">0000</span><span class="token operator">-</span><span class="token number">0000</span><span class="token operator">-</span><span class="token number">0000</span><span class="token operator">-</span><span class="token number">000000000000.</span>
<span class="token class-name">JobManager</span> <span class="token class-name">Web</span> <span class="token class-name">Interface</span><span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>z054<span class="token punctuation">.</span>sqa<span class="token punctuation">.</span>net<span class="token operator">:</span><span class="token number">28665</span></code></pre><p>启动 scala shell，连到 jm：</p>
<pre class="code"><code>$bin<span class="token operator">/</span>start<span class="token operator">-</span>scala<span class="token operator">-</span>shell<span class="token punctuation">.</span>sh remote z054<span class="token punctuation">.</span>sqa<span class="token punctuation">.</span>net <span class="token number">28665</span>
<span class="token class-name">Starting</span> <span class="token class-name">Flink</span> <span class="token class-name">Shell</span><span class="token operator">:</span>
<span class="token class-name">Connecting</span> <span class="token keyword">to</span> <span class="token class-name">Flink</span> cluster <span class="token punctuation">(</span>host<span class="token operator">:</span> z054<span class="token punctuation">.</span>sqa<span class="token punctuation">.</span>net<span class="token punctuation">,</span> port<span class="token operator">:</span> <span class="token number">28665</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
scala<span class="token operator">&gt;</span></code></pre><h5 id="yarn">Yarn</h5><pre class="code"><code>$<span class="token punctuation">.</span>/bin<span class="token operator">/</span>start<span class="token operator">-</span>scala<span class="token operator">-</span>shell<span class="token punctuation">.</span>sh yarn <span class="token operator">-</span>n <span class="token number">2</span> <span class="token operator">-</span>jm <span class="token number">1024</span> <span class="token operator">-</span>s <span class="token number">2</span> <span class="token operator">-</span>tm <span class="token number">1024</span> <span class="token operator">-</span>nm flink<span class="token operator">-</span>yarn

<span class="token class-name">Starting</span> <span class="token class-name">Flink</span> <span class="token class-name">Shell</span><span class="token operator">:</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">695</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> jobmanager<span class="token punctuation">.</span>rpc<span class="token punctuation">.</span>address<span class="token punctuation">,</span> localhost
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">697</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> jobmanager<span class="token punctuation">.</span>rpc<span class="token punctuation">.</span>port<span class="token punctuation">,</span> <span class="token number">6123</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">697</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> jobmanager<span class="token punctuation">.</span>heap<span class="token punctuation">.</span>size<span class="token punctuation">,</span> <span class="token number">1024</span>m
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">697</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> taskmanager<span class="token punctuation">.</span>heap<span class="token punctuation">.</span>size<span class="token punctuation">,</span> <span class="token number">1024</span>m
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">697</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> taskmanager<span class="token punctuation">.</span>numberOfTaskSlots<span class="token punctuation">,</span> <span class="token number">4</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">698</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> parallelism<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">,</span> <span class="token number">1</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">698</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> state<span class="token punctuation">.</span>savepoints<span class="token punctuation">.</span>dir<span class="token punctuation">,</span> file<span class="token operator">:</span><span class="token operator">/</span><span class="token comment">//tmp/savepoint</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">698</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span></span>GlobalConfiguration</span>            <span class="token operator">-</span> <span class="token class-name">Loading</span> configuration property<span class="token operator">:</span> rest<span class="token punctuation">.</span>port<span class="token punctuation">,</span> <span class="token number">8081</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">717</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">Found</span> <span class="token class-name">Yarn</span> properties file under <span class="token operator">/</span>tmp<span class="token operator">/</span><span class="token punctuation">.</span>yarn<span class="token operator">-</span>properties<span class="token operator">-</span>admin<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">041</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span>RMProxy</span>                         <span class="token operator">-</span> <span class="token class-name">Connecting</span> <span class="token keyword">to</span> <span class="token class-name">ResourceManager</span> at z05c05217<span class="token punctuation">.</span>sqa<span class="token punctuation">.</span>zth<span class="token punctuation">.</span>tbsite<span class="token punctuation">.</span>net<span class="token operator">/</span><span class="token number">11.163</span><span class="token number">.188</span><span class="token number">.29</span><span class="token operator">:</span><span class="token number">8050</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">098</span> WARN  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>NativeCodeLoader</span>                       <span class="token operator">-</span> <span class="token class-name">Unable</span> <span class="token keyword">to</span> <span class="token namespace">load</span> <span class="token keyword">native</span><span class="token operator">-</span>hadoop library <span class="token keyword">for</span> your platform<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> using builtin<span class="token operator">-</span>java classes where applicable
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">266</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">No</span> path <span class="token keyword">for</span> the flink jar <span class="token class-name"><span class="token namespace">passed<span class="token punctuation">.</span></span> Using</span> the location of <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>YarnClusterDescriptor</span> <span class="token keyword">to</span> <span class="token namespace">locate</span> the jar
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">275</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>FlinkYarnSessionCli</span>                 <span class="token operator">-</span> <span class="token class-name">The</span> argument yn is deprecated in will be ignored<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">357</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Cluster</span> specification<span class="token operator">:</span> <span class="token class-name">ClusterSpecification</span><span class="token punctuation">{</span>masterMemoryMB<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span> taskManagerMemoryMB<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">,</span> numberTaskManagers<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> slotsPerTaskManager<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">}</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">711</span> WARN  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hdfs<span class="token punctuation">.</span>shortcircuit<span class="token punctuation">.</span></span>DomainSocketFactory</span>       <span class="token operator">-</span> <span class="token class-name">The</span> <span class="token keyword">short</span><span class="token operator">-</span>circuit local reads feature cannot be used because libhadoop cannot be loaded<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">718</span> WARN  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">The</span> configuration directory <span class="token punctuation">(</span><span class="token string">'/home/admin/flink/flink-1.7.2/conf'</span><span class="token punctuation">)</span> contains both LOG4J and <span class="token class-name">Logback</span> configuration <span class="token class-name"><span class="token namespace">files<span class="token punctuation">.</span></span> Please</span> delete or rename one of them<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">46</span><span class="token punctuation">,</span><span class="token number">514</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Submitting</span> application master application_1532332183347_0710
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">46</span><span class="token punctuation">,</span><span class="token number">534</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span>client<span class="token punctuation">.</span>api<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>YarnClientImpl</span>         <span class="token operator">-</span> <span class="token class-name">Submitted</span> application application_1532332183347_0710
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">46</span><span class="token punctuation">,</span><span class="token number">534</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Waiting</span> <span class="token keyword">for</span> the cluster <span class="token keyword">to</span> <span class="token namespace">be</span> allocated
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">46</span><span class="token punctuation">,</span><span class="token number">535</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> <span class="token class-name">Deploying</span> cluster<span class="token punctuation">,</span> current state ACCEPTED
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">51</span><span class="token punctuation">,</span><span class="token number">051</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>yarn<span class="token punctuation">.</span></span>AbstractYarnClusterDescriptor</span>           <span class="token operator">-</span> YARN application has been deployed successfully<span class="token punctuation">.</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">09</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">51</span><span class="token punctuation">,</span><span class="token number">222</span> INFO  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>rest<span class="token punctuation">.</span></span>RestClient</span>                      <span class="token operator">-</span> <span class="token class-name">Rest</span> client endpoint <span class="token class-name"><span class="token namespace">started<span class="token punctuation">.</span></span>

Connecting</span> <span class="token keyword">to</span> <span class="token class-name">Flink</span> cluster <span class="token punctuation">(</span>host<span class="token operator">:</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.10</span><span class="token punctuation">,</span> port<span class="token operator">:</span> <span class="token number">56942</span><span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre><p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01olbWVp1W6VUvHtTYI_!!6000000002739-2-tps-1024-345.png" alt="null"></p>
<p>按 CTRL + C 退出 Shell 后，这个 Flink cluster 还会继续运行，不会退出。</p>
<h4 id="322-execute">3.2.2 Execute</h4><h5 id="dataset">DataSet</h5><pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>stop<span class="token operator">-</span>cluster<span class="token punctuation">.</span>sh
<span class="token class-name">No</span> taskexecutor daemon <span class="token keyword">to</span> <span class="token namespace">stop</span> on host zkb<span class="token operator">-</span>MBP<span class="token punctuation">.</span>local<span class="token punctuation">.</span>
<span class="token class-name">No</span> standalonesession daemon <span class="token keyword">to</span> <span class="token namespace">stop</span> on host zkb<span class="token operator">-</span>MBP<span class="token punctuation">.</span>local<span class="token punctuation">.</span>
➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>start<span class="token operator">-</span>scala<span class="token operator">-</span>shell<span class="token punctuation">.</span>sh local
<span class="token class-name">Starting</span> <span class="token class-name">Flink</span> <span class="token class-name">Shell</span><span class="token operator">:</span>
<span class="token class-name">Starting</span> local <span class="token class-name">Flink</span> cluster <span class="token punctuation">(</span>host<span class="token operator">:</span> localhost<span class="token punctuation">,</span> port<span class="token operator">:</span> <span class="token number">8081</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token class-name">Connecting</span> <span class="token keyword">to</span> <span class="token class-name">Flink</span> cluster <span class="token punctuation">(</span>host<span class="token operator">:</span> localhost<span class="token punctuation">,</span> port<span class="token operator">:</span> <span class="token number">8081</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

scala<span class="token operator">&gt;</span> val text <span class="token operator">=</span> benv<span class="token punctuation">.</span><span class="token function">fromElements</span><span class="token punctuation">(</span><span class="token string">"To be, or not to be,--that is the question:--"</span><span class="token punctuation">)</span>
text<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>api<span class="token punctuation">.</span>scala<span class="token punctuation">.</span></span>DataSet</span><span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>api<span class="token punctuation">.</span>scala<span class="token punctuation">.</span></span>DataSet</span><span class="token annotation punctuation">@5b407336</span>

scala<span class="token operator">&gt;</span> val counts <span class="token operator">=</span> text<span class="token punctuation">.</span>flatMap <span class="token punctuation">{</span> _<span class="token punctuation">.</span>toLowerCase<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\\W+"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
counts<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>api<span class="token punctuation">.</span>scala<span class="token punctuation">.</span></span>AggregateDataSet</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>api<span class="token punctuation">.</span>scala<span class="token punctuation">.</span></span>AggregateDataSet</span><span class="token annotation punctuation">@6ee34fe4</span>

scala<span class="token operator">&gt;</span> counts<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>be<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>is<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>not<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>or<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>question<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>that<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>the<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">to</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span></code></pre><p>对 DataSet 任务来说，print() 会触发任务的执行。</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01VJR2Rw1l7chQBkWaR_!!6000000004772-2-tps-1024-412.png" alt="null"></p>
<p>也可以将结果输出到文件（先删除 /tmp/out1，不然会报错同名文件已经存在），继续执行以下命令：</p>
<pre class="code"><code>scala<span class="token operator">&gt;</span> counts<span class="token punctuation">.</span><span class="token function">writeAsText</span><span class="token punctuation">(</span><span class="token string">"/tmp/out1"</span><span class="token punctuation">)</span>
res1<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>api<span class="token punctuation">.</span>java<span class="token punctuation">.</span>operators<span class="token punctuation">.</span></span>DataSink</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">DataSink</span> <span class="token string">'&lt;unnamed&gt;'</span> <span class="token punctuation">(</span><span class="token class-name">TextOutputFormat</span> <span class="token punctuation">(</span><span class="token operator">/</span>tmp<span class="token operator">/</span>out1<span class="token punctuation">)</span> <span class="token operator">-</span> UTF<span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> benv<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">"batch test"</span><span class="token punctuation">)</span>
res2<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>api<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span>JobExecutionResult</span> <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>api<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span>JobExecutionResult</span><span class="token annotation punctuation">@737652a9</span></code></pre><p>查看 /tmp/out1 文件就能看到输出结果。</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> cat <span class="token operator">/</span>tmp<span class="token operator">/</span>out1
<span class="token punctuation">(</span>be<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>is<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>not<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>or<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>question<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>that<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>the<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">to</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span></code></pre><p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01CykAA31if6oJLTx7F_!!6000000004439-2-tps-1024-433.png" alt="null"></p>
<h5 id="datasteam">DataSteam</h5><pre class="code"><code>scala<span class="token operator">&gt;</span> val textStreaming <span class="token operator">=</span> senv<span class="token punctuation">.</span><span class="token function">fromElements</span><span class="token punctuation">(</span><span class="token string">"To be, or not to be,--that is the question:--"</span><span class="token punctuation">)</span>
textStreaming<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>streaming<span class="token punctuation">.</span>api<span class="token punctuation">.</span>scala<span class="token punctuation">.</span></span>DataStream</span><span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>streaming<span class="token punctuation">.</span>api<span class="token punctuation">.</span>scala<span class="token punctuation">.</span></span>DataStream</span><span class="token annotation punctuation">@4970b93d</span>

scala<span class="token operator">&gt;</span> val countsStreaming <span class="token operator">=</span> textStreaming<span class="token punctuation">.</span>flatMap <span class="token punctuation">{</span> _<span class="token punctuation">.</span>toLowerCase<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\\W+"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">keyBy</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
countsStreaming<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>streaming<span class="token punctuation">.</span>api<span class="token punctuation">.</span>scala<span class="token punctuation">.</span></span>DataStream</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>streaming<span class="token punctuation">.</span>api<span class="token punctuation">.</span>scala<span class="token punctuation">.</span></span>DataStream</span><span class="token annotation punctuation">@6a478680</span>

scala<span class="token operator">&gt;</span> countsStreaming<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
res3<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>streaming<span class="token punctuation">.</span>api<span class="token punctuation">.</span>datastream<span class="token punctuation">.</span></span>DataStreamSink</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>streaming<span class="token punctuation">.</span>api<span class="token punctuation">.</span>datastream<span class="token punctuation">.</span></span>DataStreamSink</span><span class="token annotation punctuation">@42bfc11f</span>

scala<span class="token operator">&gt;</span> senv<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">"Streaming Wordcount"</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">to</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>be<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>or<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>not<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">to</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>be<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>that<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>is<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>the<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>question<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
res4<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>api<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span>JobExecutionResult</span> <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>flink<span class="token punctuation">.</span>api<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span>JobExecutionResult</span><span class="token annotation punctuation">@1878815a</span></code></pre><p>对 DataStream 任务，print() 并不会触发任务的执行，需要显示调用 execute(“job name”) 才会执行任务。</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01X79YRy1K4QJ1Ut4y3_!!6000000001110-2-tps-1024-461.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01PYBgcA1nKZ7gr3F9I_!!6000000005071-2-tps-1024-525.png" alt="null"></p>
<h5 id="tableapi">TableAPI</h5><p>在 Blink 开源版本里面，支持了 TableAPI 方式提交任务（可以用 btenv.sqlQuery 提交 SQL 查询），社区版本 Flink 1.8 会支持 TableAPI: <strong><a href="https://issues.apache.org/jira/browse/FLINK-9555" target="_blank" rel="noopener">https://issues.apache.org/jira/browse/FLINK-9555</a></strong></p>
<h3 id="33-sql-client-beta">3.3 SQL Client Beta</h3><p>SQL Client 目前还只是测试版，处于开发阶段，只能用于 SQL 的原型验证，不推荐在生产环境使用。</p>
<h4 id="331-基本用法">3.3.1 基本用法</h4><pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> bin<span class="token operator">/</span>start<span class="token operator">-</span>cluster<span class="token punctuation">.</span>sh
<span class="token class-name">Starting</span> <span class="token class-name"><span class="token namespace">cluster<span class="token punctuation">.</span></span>
Starting</span> standalonesession daemon on host zkb<span class="token operator">-</span>MBP<span class="token punctuation">.</span>local<span class="token punctuation">.</span>
<span class="token class-name">Starting</span> taskexecutor daemon on host zkb<span class="token operator">-</span>MBP<span class="token punctuation">.</span>local<span class="token punctuation">.</span>

➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> <span class="token punctuation">.</span>/bin<span class="token operator">/</span>sql<span class="token operator">-</span>client<span class="token punctuation">.</span>sh embedded
<span class="token class-name">No</span> <span class="token keyword">default</span> environment <span class="token class-name"><span class="token namespace">specified<span class="token punctuation">.</span></span>
Searching</span> <span class="token keyword">for</span> <span class="token string">'/Users/baoniu/Documents/work/tool/flink/flink-1.7.2/conf/sql-client-defaults.yaml'</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>found<span class="token punctuation">.</span>
<span class="token class-name">Reading</span> <span class="token keyword">default</span> environment from<span class="token operator">:</span> file<span class="token operator">:</span><span class="token operator">/</span><span class="token class-name">Users</span><span class="token operator">/</span>baoniu<span class="token operator">/</span><span class="token class-name">Documents</span><span class="token operator">/</span>work<span class="token operator">/</span>tool<span class="token operator">/</span>flink<span class="token operator">/</span>flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span><span class="token operator">/</span>conf<span class="token operator">/</span>sql<span class="token operator">-</span>client<span class="token operator">-</span>defaults<span class="token punctuation">.</span>yaml
<span class="token class-name">No</span> session environment <span class="token class-name"><span class="token namespace">specified<span class="token punctuation">.</span></span>
Validating</span> current environment<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>done<span class="token punctuation">.</span>
… …

<span class="token class-name">Flink</span> SQL<span class="token operator">&gt;</span> help<span class="token punctuation">;</span>
<span class="token class-name">The</span> following commands are available<span class="token operator">:</span>

QUIT        <span class="token class-name">Quits</span> the SQL CLI client<span class="token punctuation">.</span>
CLEAR       <span class="token class-name">Clears</span> the current terminal<span class="token punctuation">.</span>
HELP        <span class="token class-name">Prints</span> the available commands<span class="token punctuation">.</span>
SHOW TABLES     <span class="token class-name">Shows</span> all registered tables<span class="token punctuation">.</span>
SHOW FUNCTIONS      <span class="token class-name">Shows</span> all registered user<span class="token operator">-</span>defined functions<span class="token punctuation">.</span>
DESCRIBE        <span class="token class-name">Describes</span> the schema of a table <span class="token keyword">with</span> <span class="token namespace">the</span> given name<span class="token punctuation">.</span>
EXPLAIN     <span class="token class-name">Describes</span> the execution plan of a query or table <span class="token keyword">with</span> <span class="token namespace">the</span> given name<span class="token punctuation">.</span>
SELECT      <span class="token class-name">Executes</span> a SQL SELECT query on the <span class="token class-name">Flink</span> cluster<span class="token punctuation">.</span>
INSERT INTO     <span class="token class-name">Inserts</span> the results of a SQL SELECT query into a declared table sink<span class="token punctuation">.</span>
CREATE VIEW     <span class="token class-name">Creates</span> a virtual table from a SQL <span class="token class-name"><span class="token namespace">query<span class="token punctuation">.</span></span> Syntax</span><span class="token operator">:</span> <span class="token string">'CREATE VIEW &lt;name&gt; AS &lt;query&gt;;'</span>
DROP VIEW       <span class="token class-name">Deletes</span> a previously created virtual <span class="token class-name"><span class="token namespace">table<span class="token punctuation">.</span></span> Syntax</span><span class="token operator">:</span> <span class="token string">'DROP VIEW &lt;name&gt;;'</span>
SOURCE      <span class="token class-name">Reads</span> a SQL SELECT query from a file and executes it on the <span class="token class-name">Flink</span> cluster<span class="token punctuation">.</span>
SET     <span class="token class-name">Sets</span> a session configuration <span class="token class-name"><span class="token namespace">property<span class="token punctuation">.</span></span> Syntax</span><span class="token operator">:</span> <span class="token string">'SET &lt;key&gt;=&lt;value&gt;;'</span><span class="token punctuation">.</span> <span class="token class-name">Use</span> <span class="token string">'SET;'</span> <span class="token keyword">for</span> listing all properties<span class="token punctuation">.</span>
RESET       <span class="token class-name">Resets</span> all session configuration <span class="token class-name"><span class="token namespace">properties<span class="token punctuation">.</span></span>

Hint</span><span class="token operator">:</span> <span class="token class-name">Make</span> sure that a statement ends <span class="token keyword">with</span> <span class="token string">';'</span> <span class="token keyword">for</span> finalizing <span class="token punctuation">(</span>multi<span class="token operator">-</span>line<span class="token punctuation">)</span> statements<span class="token punctuation">.</span></code></pre><h5 id="select-查询">Select 查询</h5><pre class="code"><code><span class="token class-name">Flink</span> SQL<span class="token operator">&gt;</span> SELECT <span class="token string">'Hello World'</span><span class="token punctuation">;</span></code></pre><p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01HyDBvt1qPYHgcvr35_!!6000000005488-2-tps-1024-583.png" alt="null"></p>
<p>按 ”Q” 退出这个界面 
打开 <strong><a href="http://127.0.0.1:8081/" target="_blank" rel="noopener">http://127.0.0.1:8081</a></strong> 能看到这条 Select 语句产生的查询任务已经结束了。这个查询采用的是读取固定数据集的 Custom Source，输出用的是 Stream Collect Sink，且只输出一条结果。</p>
<p>注意：如果本机的临时目录存在类似 .yarn-properties-baoniu 的文件，任务会提交到 Yarn 上。</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01CUcZua1zJRXkfXoJq_!!6000000006693-2-tps-1024-412.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN018XJ5ov1Ypy2mCpa8B_!!6000000003109-2-tps-1024-462.png" alt="null"></p>
<h5 id="explain">Explain</h5><p>Explain 命令可以查看 SQL 的执行计划。</p>
<pre class="code"><code><span class="token class-name">Flink</span> SQL<span class="token operator">&gt;</span> explain <span class="token class-name">SELECT</span> name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> AS cnt FROM <span class="token punctuation">(</span>VALUES <span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Alice'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Greg'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> AS <span class="token class-name">NameTable</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> GROUP <span class="token class-name">BY</span> name<span class="token punctuation">;</span>

<span class="token operator">==</span> <span class="token class-name">Abstract</span> <span class="token class-name">Syntax</span> <span class="token class-name">Tree</span> <span class="token operator">==</span>        <span class="token comment">// 抽象语法树</span>
<span class="token class-name">LogicalAggregate</span><span class="token punctuation">(</span>group<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cnt<span class="token operator">=</span><span class="token punctuation">[</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token class-name">LogicalValues</span><span class="token punctuation">(</span>tuples<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">{</span> _UTF<span class="token operator">-</span><span class="token number">16L</span>E<span class="token string">'Bob  '</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> _UTF<span class="token operator">-</span><span class="token number">16L</span>E<span class="token string">'Alice'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> _UTF<span class="token operator">-</span><span class="token number">16L</span>E<span class="token string">'Greg '</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> _UTF<span class="token operator">-</span><span class="token number">16L</span>E<span class="token string">'Bob  '</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token operator">==</span> <span class="token class-name">Optimized</span> <span class="token class-name">Logical</span> <span class="token class-name">Plan</span> <span class="token operator">==</span>     <span class="token comment">// 优化后的逻辑执行计划</span>
<span class="token class-name">DataStreamGroupAggregate</span><span class="token punctuation">(</span>groupBy<span class="token operator">=</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span> select<span class="token operator">=</span><span class="token punctuation">[</span>name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> AS cnt<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token class-name">DataStreamValues</span><span class="token punctuation">(</span>tuples<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">{</span> _UTF<span class="token operator">-</span><span class="token number">16L</span>E<span class="token string">'Bob  '</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> _UTF<span class="token operator">-</span><span class="token number">16L</span>E<span class="token string">'Alice'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> _UTF<span class="token operator">-</span><span class="token number">16L</span>E<span class="token string">'Greg '</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> _UTF<span class="token operator">-</span><span class="token number">16L</span>E<span class="token string">'Bob  '</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token operator">==</span> <span class="token class-name">Physical</span> <span class="token class-name">Execution</span> <span class="token class-name">Plan</span> <span class="token operator">==</span>   <span class="token comment">// 物理执行计划</span>
<span class="token class-name">Stage</span> <span class="token number">3</span> <span class="token operator">:</span> <span class="token class-name">Data</span> <span class="token class-name">Source</span>
    content <span class="token operator">:</span> collect elements <span class="token keyword">with</span> <span class="token class-name">CollectionInputFormat</span>

    <span class="token class-name">Stage</span> <span class="token number">5</span> <span class="token operator">:</span> <span class="token class-name">Operator</span>
        content <span class="token operator">:</span> groupBy<span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> select<span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token class-name">AS</span> cnt<span class="token punctuation">)</span>
        ship_strategy <span class="token operator">:</span> HASH</code></pre><h4 id="332-结果展示">3.3.2 结果展示</h4><p>SQL Client 支持两种模式来维护并展示查询结果：</p>
<ul>
<li>table mode: 在内存中物化查询结果，并以分页 table 形式展示。用户可以通过以下命令启用 table mode;</li>
</ul>
<pre class="code"><code> SET execution<span class="token punctuation">.</span>result<span class="token operator">-</span>mode<span class="token operator">=</span>table</code></pre><ul>
<li>changlog mode: 不会物化查询结果，而是直接对 continuous query 产生的添加和撤回（retractions）结果进行展示。</li>
</ul>
<pre class="code"><code>SET execution<span class="token punctuation">.</span>result<span class="token operator">-</span>mode<span class="token operator">=</span>changelog</code></pre><p>接下来通过实际的例子进行演示。</p>
<h5 id="table-mode">Table mode</h5><pre class="code"><code><span class="token class-name">Flink</span> SQL<span class="token operator">&gt;</span> SET execution<span class="token punctuation">.</span>result<span class="token operator">-</span>mode<span class="token operator">=</span>table<span class="token punctuation">;</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token class-name">Session</span> property has been <span class="token class-name"><span class="token namespace">set<span class="token punctuation">.</span></span>

Flink</span> SQL<span class="token operator">&gt;</span> <span class="token class-name">SELECT</span> name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> AS cnt FROM <span class="token punctuation">(</span>VALUES <span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Alice'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Greg'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> AS <span class="token class-name">NameTable</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> GROUP <span class="token class-name">BY</span> name<span class="token punctuation">;</span></code></pre><p>运行结果如下图所示：</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01vQGpxT1iUZhPxHqzE_!!6000000004416-2-tps-1024-585.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01E2dTgK1sZHvyNJpFa_!!6000000005780-2-tps-1024-491.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01V8dotD25OptsPCTSp_!!6000000007517-2-tps-1024-484.png" alt="null"></p>
<h5 id="changlog-mode">Changlog mode</h5><pre class="code"><code><span class="token class-name">Flink</span> SQL<span class="token operator">&gt;</span> SET execution<span class="token punctuation">.</span>result<span class="token operator">-</span>mode<span class="token operator">=</span>changelog<span class="token punctuation">;</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token class-name">Session</span> property has been <span class="token class-name"><span class="token namespace">set<span class="token punctuation">.</span></span>

Flink</span> SQL<span class="token operator">&gt;</span> <span class="token class-name">SELECT</span> name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> AS cnt FROM <span class="token punctuation">(</span>VALUES <span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Alice'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Greg'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> AS <span class="token class-name">NameTable</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> GROUP <span class="token class-name">BY</span> name<span class="token punctuation">;</span></code></pre><p>运行结果如下图所示：</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01oAU7Bu1r8R6AnXS8I_!!6000000005586-2-tps-1024-584.png" alt="null"></p>
<p>其中 ‘-’ 代表的就是撤回消息。</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01YMRUoY1Mg67MpSijT_!!6000000001463-2-tps-1024-538.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN0135WjQ21zidKBxqvuA_!!6000000006748-2-tps-1024-485.png" alt="null"></p>
<h4 id="333-environment-files">3.3.3 Environment Files</h4><p>目前的 SQL Client 还不支持 DDL 语句，只能通过 yaml 文件的方式来定义 SQL 查询需要的表，UDF 和运行参数等信息。</p>
<p>首先，准备 env.yaml 和 input.csv 两个文件。</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> cat <span class="token operator">/</span>tmp<span class="token operator">/</span>env<span class="token punctuation">.</span>yaml
tables<span class="token operator">:</span>
  <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token class-name">MyTableSource</span>
    type<span class="token operator">:</span> source<span class="token operator">-</span>table
    update<span class="token operator">-</span>mode<span class="token operator">:</span> append
    connector<span class="token operator">:</span>
      type<span class="token operator">:</span> filesystem
      path<span class="token operator">:</span> <span class="token string">"/tmp/input.csv"</span>
    format<span class="token operator">:</span>
      type<span class="token operator">:</span> csv
      fields<span class="token operator">:</span>
        <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token class-name">MyField1</span>
          type<span class="token operator">:</span> INT
        <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token class-name">MyField2</span>
          type<span class="token operator">:</span> VARCHAR
      line<span class="token operator">-</span>delimiter<span class="token operator">:</span> <span class="token string">"\n"</span>
      comment<span class="token operator">-</span>prefix<span class="token operator">:</span> <span class="token string">"#"</span>
    schema<span class="token operator">:</span>
      <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token class-name">MyField1</span>
        type<span class="token operator">:</span> INT
      <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token class-name">MyField2</span>
        type<span class="token operator">:</span> VARCHAR
  <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token class-name">MyCustomView</span>
    type<span class="token operator">:</span> view
    query<span class="token operator">:</span> <span class="token string">"SELECT MyField2 FROM MyTableSource"</span>
  <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token class-name">MyTableSink</span>
    type<span class="token operator">:</span> sink<span class="token operator">-</span>table
    update<span class="token operator">-</span>mode<span class="token operator">:</span> append
    connector<span class="token operator">:</span>
      type<span class="token operator">:</span> filesystem
      path<span class="token operator">:</span> <span class="token string">"/tmp/output.csv"</span>
    format<span class="token operator">:</span>
      type<span class="token operator">:</span> csv
      fields<span class="token operator">:</span>
        <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token class-name">MyField1</span>
          type<span class="token operator">:</span> INT
        <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token class-name">MyField2</span>
          type<span class="token operator">:</span> VARCHAR
    schema<span class="token operator">:</span>
      <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token class-name">MyField1</span>
        type<span class="token operator">:</span> INT
      <span class="token operator">-</span> name<span class="token operator">:</span> <span class="token class-name">MyField2</span>
        type<span class="token operator">:</span> VARCHAR

# <span class="token class-name">Execution</span> properties allow <span class="token keyword">for</span> changing the behavior of a table program<span class="token punctuation">.</span>

execution<span class="token operator">:</span>
  type<span class="token operator">:</span> streaming                   # required<span class="token operator">:</span> execution mode either <span class="token string">'batch'</span> or <span class="token string">'streaming'</span>
  result<span class="token operator">-</span>mode<span class="token operator">:</span> table                # required<span class="token operator">:</span> either <span class="token string">'table'</span> or <span class="token string">'changelog'</span>
  max<span class="token operator">-</span>table<span class="token operator">-</span>result<span class="token operator">-</span>rows<span class="token operator">:</span> <span class="token number">1000000</span>    # optional<span class="token operator">:</span> maximum number of maintained rows in
                                    #   <span class="token string">'table'</span> mode <span class="token punctuation">(</span><span class="token number">1000000</span> by <span class="token keyword">default</span><span class="token punctuation">,</span> smaller <span class="token number">1</span> means unlimited<span class="token punctuation">)</span>
  time<span class="token operator">-</span>characteristic<span class="token operator">:</span> event<span class="token operator">-</span>time   # optional<span class="token operator">:</span> <span class="token string">'processing-time'</span> or <span class="token string">'event-time'</span> <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span>
  parallelism<span class="token operator">:</span> <span class="token number">1</span>                    # optional<span class="token operator">:</span> <span class="token class-name">Flink</span>'s parallelism <span class="token punctuation">(</span><span class="token number">1</span> by <span class="token keyword">default</span><span class="token punctuation">)</span>
  periodic<span class="token operator">-</span>watermarks<span class="token operator">-</span>interval<span class="token operator">:</span> <span class="token number">200</span> # optional<span class="token operator">:</span> interval <span class="token keyword">for</span> periodic watermarks <span class="token punctuation">(</span><span class="token number">200</span> ms by <span class="token keyword">default</span><span class="token punctuation">)</span>
  max<span class="token operator">-</span>parallelism<span class="token operator">:</span> <span class="token number">16</span>               # optional<span class="token operator">:</span> <span class="token class-name">Flink</span>'s maximum parallelism <span class="token punctuation">(</span><span class="token number">128</span> by <span class="token keyword">default</span><span class="token punctuation">)</span>
  min<span class="token operator">-</span>idle<span class="token operator">-</span>state<span class="token operator">-</span>retention<span class="token operator">:</span> <span class="token number">0</span>       # optional<span class="token operator">:</span> table program's minimum idle state time
  max<span class="token operator">-</span>idle<span class="token operator">-</span>state<span class="token operator">-</span>retention<span class="token operator">:</span> <span class="token number">0</span>       # optional<span class="token operator">:</span> table program's maximum idle state time
  restart<span class="token operator">-</span>strategy<span class="token operator">:</span>                 # optional<span class="token operator">:</span> restart strategy
    type<span class="token operator">:</span> fallback                  #   <span class="token string">"fallback"</span> <span class="token keyword">to</span> <span class="token namespace">global</span> restart strategy by <span class="token keyword">default</span>

# <span class="token class-name">Deployment</span> properties allow <span class="token keyword">for</span> describing the cluster <span class="token keyword">to</span> <span class="token namespace">which</span> table programs are submitted <span class="token keyword">to</span><span class="token punctuation">.</span>

deployment<span class="token operator">:</span>
  response<span class="token operator">-</span>timeout<span class="token operator">:</span> <span class="token number">5000</span>

➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> cat <span class="token operator">/</span>tmp<span class="token operator">/</span>input<span class="token punctuation">.</span>csv
<span class="token number">1</span><span class="token punctuation">,</span>hello
<span class="token number">2</span><span class="token punctuation">,</span>world
<span class="token number">3</span><span class="token punctuation">,</span>hello world
<span class="token number">1</span><span class="token punctuation">,</span>ok
<span class="token number">3</span><span class="token punctuation">,</span>bye bye
<span class="token number">4</span><span class="token punctuation">,</span>yes</code></pre><p>启动 SQL Client：</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> <span class="token punctuation">.</span>/bin<span class="token operator">/</span>sql<span class="token operator">-</span>client<span class="token punctuation">.</span>sh embedded <span class="token operator">-</span>e <span class="token operator">/</span>tmp<span class="token operator">/</span>env<span class="token punctuation">.</span>yaml
<span class="token class-name">No</span> <span class="token keyword">default</span> environment <span class="token class-name"><span class="token namespace">specified<span class="token punctuation">.</span></span>
Searching</span> <span class="token keyword">for</span> <span class="token string">'/Users/baoniu/Documents/work/tool/flink/flink-1.7.2/conf/sql-client-defaults.yaml'</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>found<span class="token punctuation">.</span>
<span class="token class-name">Reading</span> <span class="token keyword">default</span> environment from<span class="token operator">:</span> file<span class="token operator">:</span><span class="token operator">/</span><span class="token class-name">Users</span><span class="token operator">/</span>baoniu<span class="token operator">/</span><span class="token class-name">Documents</span><span class="token operator">/</span>work<span class="token operator">/</span>tool<span class="token operator">/</span>flink<span class="token operator">/</span>flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span><span class="token operator">/</span>conf<span class="token operator">/</span>sql<span class="token operator">-</span>client<span class="token operator">-</span>defaults<span class="token punctuation">.</span>yaml
<span class="token class-name">Reading</span> session environment from<span class="token operator">:</span> file<span class="token operator">:</span><span class="token operator">/</span>tmp<span class="token operator">/</span>env<span class="token punctuation">.</span>yaml
<span class="token class-name">Validating</span> current environment<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>done<span class="token punctuation">.</span>

<span class="token class-name">Flink</span> SQL<span class="token operator">&gt;</span> show tables<span class="token punctuation">;</span>
<span class="token class-name">MyCustomView</span>
<span class="token class-name">MyTableSink</span>
<span class="token class-name">MyTableSource</span>

<span class="token class-name">Flink</span> SQL<span class="token operator">&gt;</span> describe <span class="token class-name">MyTableSource</span><span class="token punctuation">;</span>
root
 <span class="token operator">|</span><span class="token operator">--</span> <span class="token class-name">MyField1</span><span class="token operator">:</span> <span class="token class-name">Integer</span>
 <span class="token operator">|</span><span class="token operator">--</span> <span class="token class-name">MyField2</span><span class="token operator">:</span> <span class="token class-name">String</span>

<span class="token class-name">Flink</span> SQL<span class="token operator">&gt;</span> describe <span class="token class-name">MyCustomView</span><span class="token punctuation">;</span>
root
 <span class="token operator">|</span><span class="token operator">--</span> <span class="token class-name">MyField2</span><span class="token operator">:</span> <span class="token class-name">String</span>

<span class="token class-name">Flink</span> SQL<span class="token operator">&gt;</span> create view <span class="token class-name">MyView1</span> as select <span class="token class-name">MyField1</span> from <span class="token class-name">MyTableSource</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token class-name">View</span> has been <span class="token class-name"><span class="token namespace">created<span class="token punctuation">.</span></span>

Flink</span> SQL<span class="token operator">&gt;</span> show tables<span class="token punctuation">;</span>
<span class="token class-name">MyCustomView</span>
<span class="token class-name">MyTableSource</span>
<span class="token class-name">MyView1</span>

<span class="token class-name">Flink</span> SQL<span class="token operator">&gt;</span> describe <span class="token class-name">MyView1</span><span class="token punctuation">;</span>
root
 <span class="token operator">|</span><span class="token operator">--</span> <span class="token class-name">MyField1</span><span class="token operator">:</span> <span class="token class-name">Integer</span>

<span class="token class-name">Flink</span> SQL<span class="token operator">&gt;</span> select <span class="token operator">*</span> from <span class="token class-name">MyTableSource</span><span class="token punctuation">;</span></code></pre><p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01Ncgd8g1UEAtjaJQqk_!!6000000002485-2-tps-1024-584.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN0151XGHd22o4sh22r55_!!6000000007166-2-tps-1024-412.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01aVr8ct1VOzrwttzpW_!!6000000002644-2-tps-1024-480.png" alt="null"></p>
<p>使用 insert into 写入结果表：</p>
<pre class="code"><code><span class="token class-name">Flink</span> SQL<span class="token operator">&gt;</span> insert into <span class="token class-name">MyTableSink</span> select <span class="token operator">*</span> from <span class="token class-name">MyTableSource</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token class-name">Submitting</span> SQL update statement <span class="token keyword">to</span> <span class="token namespace">the</span> cluster<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token class-name">Table</span> update statement has been successfully submitted <span class="token keyword">to</span> <span class="token namespace">the</span> cluster<span class="token operator">:</span>
<span class="token class-name">Cluster</span> ID<span class="token operator">:</span> <span class="token class-name">StandaloneClusterId</span>
<span class="token class-name">Job</span> ID<span class="token operator">:</span> <span class="token number">3f</span>ac2be1fd891e3e07595c684bb7b7a0
<span class="token class-name">Web</span> <span class="token keyword">interface</span><span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8081</span></code></pre><p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01yPueNr1W9FsMdK7e8_!!6000000002745-2-tps-1024-424.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01vZ9rU21qRNrjhykqH_!!6000000005492-2-tps-1024-495.png" alt="null"></p>
<p>查询生成的结果数据文件：</p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> cat <span class="token operator">/</span>tmp<span class="token operator">/</span>output<span class="token punctuation">.</span>csv
<span class="token number">1</span><span class="token punctuation">,</span>hello
<span class="token number">2</span><span class="token punctuation">,</span>world
<span class="token number">3</span><span class="token punctuation">,</span>hello world
<span class="token number">1</span><span class="token punctuation">,</span>ok
<span class="token number">3</span><span class="token punctuation">,</span>bye bye
<span class="token number">4</span><span class="token punctuation">,</span>yes</code></pre><p>也可以在 Environment 文件里面定义 UDF，在 SQL Client 里面通过 「HOW FUNCTIONS」查询和使用，这里就不再说明了。</p>
<p>SQL Client 功能社区还在开发中，详见 **<a href="https://cwiki.apache.org/confluence/display/FLINK/FLIP-24+-+SQL+Client" target="_blank" rel="noopener">FLIP-24</a>**。</p>
<h3 id="34-restful-api">3.4 Restful API</h3><p>接下来我们演示如何通过 Rest API 来提交 Jar 包和执行任务。</p>
<p>更详细的操作请参考 Flink 的 Restful API 文档：<strong><a href="https://ci.apache.org/projects/flink/flink-docs-stable/monitoring/rest_api.html" target="_blank" rel="noopener">https://ci.apache.org/projects/flink/flink-docs-stable/monitoring/rest_api.html</a></strong></p>
<pre class="code"><code>➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> curl http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8081</span><span class="token operator">/</span>overview
<span class="token punctuation">{</span><span class="token string">"taskmanagers"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"slots-total"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"slots-available"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"jobs-running"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"jobs-finished"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"jobs-cancelled"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"jobs-failed"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"flink-version"</span><span class="token operator">:</span><span class="token string">"1.7.2"</span><span class="token punctuation">,</span><span class="token string">"flink-commit"</span><span class="token operator">:</span><span class="token string">"ceba8af"</span><span class="token punctuation">}</span><span class="token operator">%</span>

➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> curl <span class="token operator">-</span><span class="token class-name">X</span> POST <span class="token operator">-</span><span class="token class-name">H</span> <span class="token string">"Expect:"</span> <span class="token operator">-</span><span class="token class-name">F</span> <span class="token string">"jarfile=@/Users/baoniu/Documents/work/tool/flink/flink-1.7.2/examples/streaming/TopSpeedWindowing.jar"</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8081</span><span class="token operator">/</span>jars<span class="token operator">/</span>upload
<span class="token punctuation">{</span><span class="token string">"filename"</span><span class="token operator">:</span><span class="token string">"/var/folders/2b/r6d49pcs23z43b8fqsyz885c0000gn/T/flink-web-124c4895-cf08-4eec-8e15-8263d347efc2/flink-web-upload/6077eca7-6db0-4570-a4d0-4c3e05a5dc59_TopSpeedWindowing.jar"</span><span class="token punctuation">,</span><span class="token string">"status"</span><span class="token operator">:</span><span class="token string">"success"</span><span class="token punctuation">}</span><span class="token operator">%</span>       
                                                                                                                                                                                                   ➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> curl http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8081</span><span class="token operator">/</span>jars
<span class="token punctuation">{</span><span class="token string">"address"</span><span class="token operator">:</span><span class="token string">"http://localhost:8081"</span><span class="token punctuation">,</span><span class="token string">"files"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token operator">:</span><span class="token string">"6077eca7-6db0-4570-a4d0-4c3e05a5dc59_TopSpeedWindowing.jar"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"TopSpeedWindowing.jar"</span><span class="token punctuation">,</span><span class="token string">"uploaded"</span><span class="token operator">:</span><span class="token number">1553743438000</span><span class="token punctuation">,</span><span class="token string">"entry"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"org.apache.flink.streaming.examples.windowing.TopSpeedWindowing"</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">%</span>

➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> curl http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8081</span><span class="token operator">/</span>jars<span class="token operator">/</span><span class="token number">6077</span>eca7<span class="token operator">-</span><span class="token number">6d</span>b0<span class="token operator">-</span><span class="token number">4570</span><span class="token operator">-</span>a4d0<span class="token operator">-</span><span class="token number">4</span>c3e05a5dc59_TopSpeedWindowing<span class="token punctuation">.</span>jar<span class="token operator">/</span>plan
<span class="token punctuation">{</span><span class="token string">"plan"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">"jid"</span><span class="token operator">:</span><span class="token string">"41029eb3feb9132619e454ec9b2a89fb"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"CarTopSpeedWindowingExample"</span><span class="token punctuation">,</span><span class="token string">"nodes"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token operator">:</span><span class="token string">"90bea66de1c231edf33913ecd54406c1"</span><span class="token punctuation">,</span><span class="token string">"parallelism"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"operator"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"operator_strategy"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"Window(GlobalWindows(), DeltaTrigger, TimeEvictor, ComparableAggregator, PassThroughWindowFunction) -&gt; Sink: Print to Std. Out"</span><span class="token punctuation">,</span><span class="token string">"inputs"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"num"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"id"</span><span class="token operator">:</span><span class="token string">"cbc357ccb763df2852fee8c4fc7d55f2"</span><span class="token punctuation">,</span><span class="token string">"ship_strategy"</span><span class="token operator">:</span><span class="token string">"HASH"</span><span class="token punctuation">,</span><span class="token string">"exchange"</span><span class="token operator">:</span><span class="token string">"pipelined_bounded"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">"optimizer_properties"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token operator">:</span><span class="token string">"cbc357ccb763df2852fee8c4fc7d55f2"</span><span class="token punctuation">,</span><span class="token string">"parallelism"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"operator"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"operator_strategy"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"Source: Custom Source -&gt; Timestamps/Watermarks"</span><span class="token punctuation">,</span><span class="token string">"optimizer_properties"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">%</span>                                                                                                                                                    ➜  flink<span class="token operator">-</span><span class="token number">1.7</span><span class="token number">.2</span> curl <span class="token operator">-</span><span class="token class-name">X</span> POST http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8081</span><span class="token operator">/</span>jars<span class="token operator">/</span><span class="token number">6077</span>eca7<span class="token operator">-</span><span class="token number">6d</span>b0<span class="token operator">-</span><span class="token number">4570</span><span class="token operator">-</span>a4d0<span class="token operator">-</span><span class="token number">4</span>c3e05a5dc59_TopSpeedWindowing<span class="token punctuation">.</span>jar<span class="token operator">/</span>run
<span class="token punctuation">{</span><span class="token string">"jobid"</span><span class="token operator">:</span><span class="token string">"04d80a24b076523d3dc5fbaa0ad5e1ad"</span><span class="token punctuation">}</span><span class="token operator">%</span></code></pre><p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN012TE1bN1kvG0WKTdhs_!!6000000004745-2-tps-1024-215.png" alt="null"></p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01Q2TYK11UytITCPqsX_!!6000000002587-2-tps-1024-323.png" alt="null"></p>
<p>Restful API 还提供了很多监控和 Metrics 相关的功能，对于任务提交的操作也支持的比较全面。</p>
<h3 id="35-web">3.5 Web</h3><p>在 Flink Dashboard 页面左侧可以看到有个「Submit new Job」的地方，用户可以上传 Jar 包和显示执行计划和提交任务。Web 提交功能主要用于新手入门和演示用。</p>
<p><img class="img-responsive" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01SKuDgA1LUMLliRorx_!!6000000001302-2-tps-1024-436.png" alt="null"></p>
<h2 id="4-结语">4. 结语</h2><p>本期的课程到这里就结束了，我们主要讲解了 Flink 的 5 种任务提交的方式。熟练掌握各种任务提交方式，有利于提高我们日常的开发和运维效率。</p>
<p>视频回顾：<strong><a href="https://www.bilibili.com/video/av47600600/?spm_id_from=333.788.videocard.5" target="_blank" rel="noopener">https://www.bilibili.com/video/av47600600/?spm_id_from=333.788.videocard.5</a></strong></p>
<hr>
<p>欢迎转载，敬请在正文中标注并<strong>保留文章来源、原文链接、作者/译者</strong>等信息。</p>
</div><flink-pre-next _ngcontent-flink-c48="" _nghost-flink-c46=""><a _ngcontent-flink-c46="" class="pre" href="https://flink-learning.org.cn/article/detail/f036fa207bacd488ab89f20594780f68"><i _ngcontent-flink-c46="" class="flink-community communityzuojiantou"></i><span _ngcontent-flink-c46="">Apache Flink 零基础入门（六）：Flink Time &amp; Window 解析</span></a><a _ngcontent-flink-c46="" class="next" href="https://flink-learning.org.cn/article/detail/d8e3500e0cd06eb09e6d638866ea40e4"><span _ngcontent-flink-c46="">Apache Flink 零基础入门（四）：DataStream API 编程</span><i _ngcontent-flink-c46="" class="flink-community communityyoujiantou"></i></a></flink-pre-next></div><div _ngcontent-flink-c48="" class="article-right"><input _ngcontent-flink-c48="" id="toc-1" type="checkbox" class="check"><flink-toc _ngcontent-flink-c48="" class="toc" _nghost-flink-c47=""><ul _ngcontent-flink-c47=""><li _ngcontent-flink-c47="" style="padding-left: 0px;"><a _ngcontent-flink-c47="" class="hover"> 1. 环境说明 </a></li><li _ngcontent-flink-c47="" style="padding-left: 0px;"><a _ngcontent-flink-c47="" class="hover"> 2. 课程概要 </a></li><li _ngcontent-flink-c47="" style="padding-left: 0px;"><a _ngcontent-flink-c47="" class="hover"> 3. Flink 客户端操作 </a></li><li _ngcontent-flink-c47="" style="padding-left: 12px;"><a _ngcontent-flink-c47="" class="hover"> 3.1 Flink 命令行 </a></li><li _ngcontent-flink-c47="" style="padding-left: 12px;"><a _ngcontent-flink-c47="" class="hover"> 3.2 Scala Shell </a></li><li _ngcontent-flink-c47="" style="padding-left: 12px;"><a _ngcontent-flink-c47="" class="hover"> 3.3 SQL Client Beta </a></li><li _ngcontent-flink-c47="" style="padding-left: 12px;"><a _ngcontent-flink-c47="" class="hover high-light"> 3.4 Restful API </a></li><li _ngcontent-flink-c47="" style="padding-left: 12px;"><a _ngcontent-flink-c47="" class="hover"> 3.5 Web </a></li><li _ngcontent-flink-c47="" style="padding-left: 0px;"><a _ngcontent-flink-c47="" class="hover"> 4. 结语 </a></li><!----></ul></flink-toc><label _ngcontent-flink-c48="" for="toc-1" class="toc-icon"><i _ngcontent-flink-c48="" class="flink-community communitycaidan"></i></label></div></div></div><!----></flink-detail><!----></flink-article><!----></main><flink-footer _ngcontent-flink-c21="" _nghost-flink-c19=""><div _ngcontent-flink-c19="" class="footer"><div _ngcontent-flink-c19="" class="focus-us"><flink-follow-us _ngcontent-flink-c19="" _nghost-flink-c18=""><div _ngcontent-flink-c18="" class="card dark"><div _ngcontent-flink-c18="" class="card-header"><div _ngcontent-flink-c18="" class="card-title h5">关注我们</div></div><div _ngcontent-flink-c18="" class="card-body"><ul _ngcontent-flink-c18=""><li _ngcontent-flink-c18=""><div _ngcontent-flink-c18="" class="popover popover-left"><span _ngcontent-flink-c18="" class="hover"><i _ngcontent-flink-c18="" class="flink-community communityweixin"></i> 关注「Apache Flink」微信公众号 </span><div _ngcontent-flink-c18="" class="popover-container"><div _ngcontent-flink-c18="" class="qrcode"><img _ngcontent-flink-c18="" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/qrcode_gh_5efd76d10a8d_1.jpg" alt="qr_code" width="126" height="126"></div></div></div></li><li _ngcontent-flink-c18=""><div _ngcontent-flink-c18="" class="popover popover-left"><span _ngcontent-flink-c18="" class="hover"><i _ngcontent-flink-c18="" class="flink-community communitydingding"></i> 扫码进入「Flink 中文社区」钉钉群 </span><div _ngcontent-flink-c18="" class="popover-container"><div _ngcontent-flink-c18="" class="qrcode"><img _ngcontent-flink-c18="" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01Tcto5L1EIGf4maLR2_!!6000000000328-0-tps-648-648.jpg" alt="qr_code" width="126" height="126"></div></div></div></li><li _ngcontent-flink-c18=""><a _ngcontent-flink-c18="" href="https://www.zhihu.com/people/ververica" rel="noopener" target="_blank" class="hover"><i _ngcontent-flink-c18="" class="flink-community communityzhihu"></i> 进入「Apache Flink」知乎主页 </a></li><li _ngcontent-flink-c18=""><a _ngcontent-flink-c18="" href="https://weibo.com/u/7306821686" rel="noopener" target="_blank" class="hover"><i _ngcontent-flink-c18="" class="flink-community communityweibo"></i> 进入「Apache Flink」微博主页 </a></li><li _ngcontent-flink-c18=""><a _ngcontent-flink-c18="" href="https://space.bilibili.com/33807709" rel="noopener" target="_blank" class="hover"><i _ngcontent-flink-c18="" class="flink-community communitybilibili"></i> 进入「Apache Flink」bilibili 主页 </a></li></ul></div></div></flink-follow-us></div><div _ngcontent-flink-c19="" class="footer-partner"><span _ngcontent-flink-c19="">热门产品:</span><div _ngcontent-flink-c19=""><a _ngcontent-flink-c19="" target="_blank" rel="noopener" href="https://www.aliyun.com/product/bigdata/sc">实时计算Flink版</a><!----></div></div><div _ngcontent-flink-c19="" class="footer-partner"><span _ngcontent-flink-c19="">相关推荐:</span><div _ngcontent-flink-c19=""><a _ngcontent-flink-c19="" target="_blank" rel="noopener" href="https://github.com/apache/flink">Apache Flink</a><a _ngcontent-flink-c19="" target="_blank" rel="noopener" href="https://ververica.github.io/flink-cdc-connectors/">Fink CDC</a><a _ngcontent-flink-c19="" target="_blank" rel="noopener" href="https://github.com/apache/flink-ml">Flink ML</a><a _ngcontent-flink-c19="" target="_blank" rel="noopener" href="https://github.com/apache/flink-table-store">Flink Table Store</a><a _ngcontent-flink-c19="" target="_blank" rel="noopener" href="https://github.com/flink-extended/ai-flow">AIFlow</a><a _ngcontent-flink-c19="" target="_blank" rel="noopener" href="https://github.com/pyflink">PyFlink</a><a _ngcontent-flink-c19="" target="_blank" rel="noopener" href="https://github.com/flink-extended/flink-remote-shuffle">Flink RSS</a><!----></div></div><div _ngcontent-flink-c19="" class="footer-center"><div _ngcontent-flink-c19="" class="footer-license"><a _ngcontent-flink-c19="" href="http://idinfo.zjamr.zj.gov.cn/bscx.do?method=lzxx&amp;id=3301843301000000126540" target="_blank" rel="noopener"><img _ngcontent-flink-c19="" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01NhyZOt1ZEF2xEFUQu_!!6000000003162-1-tps-65-70.gif" alt="电子营业执照" width="25" height="25"></a></div><div _ngcontent-flink-c19="" class="footer-record"><a _ngcontent-flink-c19="" target="_blank" rel="noopener" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33011002015780"><img _ngcontent-flink-c19="" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01mW5nke1nsSReBsHQw_!!6000000005145-2-tps-20-20.png" alt="公安备案" width="20" height="20"><p _ngcontent-flink-c19=""> 浙公网安备 33011002015780号 </p></a></div><div _ngcontent-flink-c19="" class="footer-article"><a _ngcontent-flink-c19="" href="https://beian.miit.gov.cn/" rel="noopener" target="_blank"><p _ngcontent-flink-c19="">浙ICP备12022327号-723</p></a></div></div></div></flink-footer><flink-back-top _ngcontent-flink-c21="" class="back-top" _nghost-flink-c20=""><div _ngcontent-flink-c20="" class="back-top"><ul _ngcontent-flink-c20=""><li _ngcontent-flink-c20=""><i _ngcontent-flink-c20="" class="flink-community communityerweima"></i> 关注 <ul _ngcontent-flink-c20=""><li _ngcontent-flink-c20=""><figure _ngcontent-flink-c20=""><img _ngcontent-flink-c20="" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/qrcode_gh_5efd76d10a8d_1.jpg" alt="qr_code" width="80" height="80"><figcaption _ngcontent-flink-c20=""><p _ngcontent-flink-c20=""><i _ngcontent-flink-c20="" class="flink-community communityweixin"></i> 微信公众号 </p><p _ngcontent-flink-c20="" class="characteristic"><span _ngcontent-flink-c20="">最新前沿</span><span _ngcontent-flink-c20="">最热资讯</span></p></figcaption></figure></li><li _ngcontent-flink-c20=""><figure _ngcontent-flink-c20=""><img _ngcontent-flink-c20="" src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/O1CN01hhMm101qQvU7k3Vcp_!!6000000005491-0-tps-720-720.jpg" alt="qr_code" width="80" height="80"><figcaption _ngcontent-flink-c20=""><p _ngcontent-flink-c20=""><i _ngcontent-flink-c20="" class="flink-community communitydingding"></i> 技术支持钉钉群 </p><p _ngcontent-flink-c20="" class="characteristic"><span _ngcontent-flink-c20="">时时刻刻</span><span _ngcontent-flink-c20="">得到帮助</span></p></figcaption></figure></li></ul></li><li _ngcontent-flink-c20=""><i _ngcontent-flink-c20="" class="flink-community communityhuojian"></i> TOP </li></ul></div></flink-back-top></flink-layout><!----></flink-root>
    <noscript>Please enable JavaScript to continue using this application.</noscript>
  <script src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/runtime.287ae7444e553e8a662c.js.download" defer=""></script><script src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/polyfills.faced95f62756f4b598a.js.download" defer=""></script><script src="./Flink 中文社区 _ Apache Flink 零基础入门（五）：客户端操作_files/main.fce602ed133a002a22f9.js.download" defer=""></script>

</body></html>